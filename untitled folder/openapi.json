{
  "openapi": "3.0.3",
  "info": {
    "title": "NuPay API",
    "version": "1.4",
    "description": "Todas as APIs providas pela NuPay for Business foram desenvolvidas baseadas na tecnologia REST,  seguindo as melhores práticas de mercado, tendo sempre em mente uma integração o mais simples possível.  Seu feedback é muito valioso para nós – por isso, sinta-se à vontade para entrar em contato com nossa  equipe de tecnologia pelo e-mail oi-nupay@nubank.com.br!\n",
    "contact": {
      "name": "Tech Team",
      "url": "https://nupaybusiness.com.br",
      "email": "oi-nupay@nubank.com.br"
    },
    "x-logo": {
      "url": "../../../images/logotipo.png",
      "altText": "NuPay for Business"
    },
    "externalDocs": {
      "description": "Saiba mais",
      "url": "/#/checkout/"
    }
  },
  "servers": [
    {
      "url": "https://sandbox-api.spinpay.com.br",
      "description": "Servidor de testes (Sandbox)"
    },
    {
      "url": "https://api.spinpay.com.br",
      "description": "Servidor de Produção"
    }
  ],
  "paths": {
    "/v1/checkouts/payments": {
      "post": {
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Informe o `access_token` com o prefixo `Bearer `. Header **necessário somente para criação de pagamentos pré-autorizados de NuPay**.",
            "example": "Bearer UVhslgtbavMol9u8",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "oneOf": [
                  {
                    "$ref": "#/components/schemas/NuPayCheckoutCreationRequest"
                  }
                ]
              },
              "examples": {
                "Checkout Válido - 2FA": {
                  "$ref": "#/components/examples/ValidNuPay2faPaymentCreationExample"
                },
                "Checkout Válido - pré-autorizado": {
                  "$ref": "#/components/examples/ValidNuPayPreAuthPaymentCreationExample"
                }
              }
            }
          },
          "required": true
        },
        "tags": [
          "Pagamentos"
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/NuPayCheckoutCreationResponse"
                    }
                  ]
                },
                "examples": {
                  "2FA - Pagamento criado": {
                    "value": {
                      "referenceId": "F5C1A4E20D3B4E07B7E871F5B5BC9F91",
                      "pspReferenceId": "ea6dd35a-699e-4dc1-b036-3369f409c8cd",
                      "status": "WAITING_PAYMENT_METHOD",
                      "paymentMethodType": "nupay",
                      "paymentUrl": "https://nuapp.nubank.com.br/bdc/omniknight/expr/payment-intents.home-screen?payment-intent-id=645a7eaa-4361-43b2-8749-575a1cd7dd4c&origin=redirect&amount=700000&storeName=Spin%20Pay%20VTEX&version=announcement-generic&token=YttDpfFwgJlPqTghs2Wmhxv4BGz43pzRsHyKuG%2Fne8LbFIg5mtaviVbRjNauowUEc9SrbSCVKSwp41lPdL32AA%3D%3D&poId=dbe77f27-8303-47e4-bcde-4687296d3531"
                    }
                  },
                  "Pré-autorizado - Pagamento criado": {
                    "value": {
                      "referenceId": "F5C1A4E20D3B4E07B7E871F5B5BC9F91",
                      "pspReferenceId": "ea6dd35a-699e-4dc1-b036-3369f409c8cd",
                      "status": "WAITING_PAYMENT_METHOD",
                      "paymentMethodType": "nupay"
                    }
                  },
                  "Pagamento cancelado pela instituição": {
                    "value": {
                      "referenceId": "F5C1A4E20D3B4E07B7E871F5B5BC9F91",
                      "pspReferenceId": "ea6dd35a-699e-4dc1-b036-3369f409c8cd",
                      "status": "CANCELLED",
                      "code": "CANCELLED_BY_INSTITUTION",
                      "message": "The institution cancelled the payment."
                    }
                  }
                }
              }
            },
            "description": ""
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BadRequestErrorResponse"
                },
                "examples": {
                  "Campo referenceId é obrigatório": {
                    "value": {
                      "status": 400,
                      "message": "[400] Undefined PaymentOrder referenceId;",
                      "details": {}
                    }
                  },
                  "Campo merchantOrderReference é obrigatório": {
                    "value": {
                      "status": 400,
                      "message": "[400] Undefined PaymentOrder merchantOrderReference;",
                      "details": {}
                    }
                  },
                  "Campo amount é obrigatório": {
                    "value": {
                      "status": 400,
                      "message": "[400] Undefined PaymentOrder amount;",
                      "details": {}
                    }
                  },
                  "Campo shopper é obrigatório": {
                    "value": {
                      "status": 400,
                      "message": "[400] Undefined PaymentOrder shopper;",
                      "details": {}
                    }
                  },
                  "Campo checkout é obrigatório": {
                    "value": {
                      "status": 400,
                      "message": "[400] Undefined PaymentOrder checkout;",
                      "details": {}
                    }
                  },
                  "Valor do amount deve ser maior que zero": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid PaymentOrder amount;",
                      "details": {}
                    }
                  },
                  "Moeda inválida no campo currency": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid PaymentOrder currency;",
                      "details": {}
                    }
                  },
                  "Documento do cliente inválido": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid PaymentOrder document;",
                      "details": {}
                    }
                  },
                  "Email do cliente inválido": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid Shopper email;",
                      "details": {}
                    }
                  },
                  "Tipo de método de pagamento inválido": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid PaymentOrder paymentMethod.type;",
                      "details": {}
                    }
                  },
                  "Tipo de autorização inválido para método de pagamento": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid PaymentOrder paymentMethod.authorizationType;",
                      "details": {}
                    }
                  },
                  "Fonte de financiamento inválida para método de pagamento": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid PaymentOrder paymentMethod.fundingSource for paymentMethod.type;",
                      "details": {}
                    }
                  },
                  "ReferenceID ou MerchantOrderReference já existe para este merchant": {
                    "value": {
                      "status": 400,
                      "message": "[400] This checkout already exists;",
                      "details": {
                        "pspReferenceId": "pspReferenceId"
                      }
                    }
                  },
                  "URL de callback inválida": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid PaymentOrder callbackUrl;",
                      "details": {}
                    }
                  },
                  "URL de retorno inválida": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid PaymentOrder returnUrl;",
                      "details": {}
                    }
                  },
                  "Número de parcelas inválido": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid PaymentOrder installments;",
                      "details": {}
                    }
                  },
                  "Fonte de financiamento débito não permite parcelamento": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid PaymentOrder paymentMethod.fundingSource for installments;",
                      "details": {}
                    }
                  },
                  "Fluxo de pagamento não implementado": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid PaymentOrder paymentFlow;",
                      "details": {}
                    }
                  },
                  "Campos obrigatórios faltantes na validação do schema": {
                    "value": {
                      "status": 400,
                      "message": "[400] Request schema validation failed;",
                      "details": {}
                    }
                  },
                  "Ausência do header JWS (somente se JWS estiver habilitado para o cliente)": {
                    "value": {
                      "status": 400,
                      "message": "[400] Missing JWS signature header",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnauthorizedAuthErrorResponse"
                },
                "examples": {
                  "Ausência do campo X-Merchant-Token obrigatório no header.": {
                    "value": {
                      "status": 401,
                      "message": "[401] Unauthorized appToken header (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
                      "details": {}
                    }
                  },
                  "Ausência do campo X-Merchant-Key obrigatório no header.": {
                    "value": {
                      "status": 401,
                      "message": "[401] Unauthorized appKey header (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
                      "details": {}
                    }
                  },
                  "JWS inválido (somente se JWS estiver habilitado para o cliente)": {
                    "value": {
                      "status": 401,
                      "message": "[401] Invalid JWS signature (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
                      "details": {}
                    }
                  },
                  "Chave pública não encontrada (somente se JWS estiver habilitado para o cliente)": {
                    "value": {
                      "status": 401,
                      "message": "[401] Public key not found (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TooManyRequestsErrorResponse"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "security": [
          {
            "MerchantApiKey": [],
            "MerchantApiToken": []
          }
        ],
        "deprecated": false,
        "operationId": "PaymentsPost",
        "summary": "Criar pagamento",
        "description": "Endpoint utilizado para criar um pedido de pagamento.\nO pedido de pagamento é criado via API com o status `WAITING_PAYMENT_METHOD`, aguardando o consumidor realizar o pagamento.\nEste status é atualizado de acordo com a ação do consumidor de pagar ou cancelar a compra. Por isso, é preciso adaptar a experiência para informar o consumidor sobre o status do pagamento e a ação a realizar. Para mais informações sobre alterações de status, consulte a seção de [Notificações](#tag/Notificacoes).\n",
        "x-codeSamples": [
          {
            "lang": "cURL",
            "label": "cURL - 2FA",
            "source": "curl --request POST \\\n     --url 'https://sandbox-api.spinpay.com.br/v1/checkouts/payments' \\\n     --header 'X-Merchant-Key: {X-Merchant-Key}' \\\n     --header 'X-Merchant-Token: {X-Merchant-Token}' \\\n     --header 'Content-Type: application/json' \\\n     --data '{\n       \"referenceId\": \"{referenceId}\",\n       \"merchantOrderReference\": \"{merchantOrderReference}\",\n       \"amount\": {\n         \"value\": 100.00,\n         \"currency\": \"BRL\"\n       },\n       \"paymentMethod\": {\n         \"type\": \"nupay\",\n         \"authorizationType\": \"manually_authorized\"\n       },\n       \"shopper\": {\n         \"firstName\": \"{customerName}\",\n         \"lastName\": \"{customerLastName}\",\n         \"document\": \"{customerDocument}\",\n         \"documentType\": \"CPF\",\n         \"email\": \"{customerEmail}\",\n         \"phone\": {\n           \"country\": \"55\",\n           \"number\": \"{customerPhone}\"\n         }\n       },\n       \"paymentFlow\": {\n         \"returnUrl\": \"https://loja.exemplo.com/sucesso\",\n         \"cancelUrl\": \"https://loja.exemplo.com/cancelar\"\n       },\n       \"recipients\": {\n         \"referenceId\": \"{referenceId}\",\n         \"amount\": {\n            \"value\": 100.00,\n            \"currency\": \"BRL\"\n          }                 \n       }\n     }'\n"
          },
          {
            "lang": "cURL",
            "label": "cURL - pré-autorizado",
            "source": "curl --request POST \\\n     --url 'https://sandbox-api.spinpay.com.br/v1/checkouts/payments' \\\n     --header 'Authorization: Bearer {access_token}' \\\n     --header 'X-Merchant-Key: {X-Merchant-Key}' \\\n     --header 'X-Merchant-Token: {X-Merchant-Token}' \\\n     --header 'Content-Type: application/json' \\\n     --data '{\n       \"referenceId\": \"{referenceId}\",\n       \"merchantOrderReference\": \"{merchantOrderReference}\",\n       \"amount\": {\n         \"value\": 100.00,\n         \"currency\": \"BRL\"\n       },\n       \"paymentMethod\": {\n         \"type\": \"nupay\",\n         \"authorizationType\": \"pre_authorized\",\n         \"fundingSource\": \"credit\"\n       },\n       \"installments\": 1,\n       \"shopper\": {\n         \"firstName\": \"{customerName}\",\n         \"lastName\": \"{customerLastName}\",\n         \"document\": \"{customerDocument}\",\n         \"documentType\": \"CPF\",\n         \"email\": \"{customerEmail}\",\n         \"phone\": {\n           \"country\": \"55\",\n           \"number\": \"{customerPhone}\"\n         }\n       },\n       \"recipients\": {\n         \"referenceId\": \"{referenceId}\",\n         \"amount\": {\n            \"value\": 100.00,\n            \"currency\": \"BRL\"\n          }                 \n       }\n     }'\n"
          }
        ]
      }
    },
    "/v1/checkouts/payments/{pspReferenceId}/status": {
      "get": {
        "tags": [
          "Pagamentos"
        ],
        "parameters": [
          {
            "name": "pspReferenceId",
            "description": "ID do pagamento que deseja visualizar o status",
            "schema": {
              "type": "string"
            },
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CheckoutStatusResponse"
                },
                "examples": {
                  "NuPay - Status de um pagamento autorizado": {
                    "value": {
                      "paymentMethodType": "nupay",
                      "installmentNumber": 1,
                      "paymentType": "credit",
                      "referenceId": "86371aa1-9e64-4abc-8af9-6400ef23cd69",
                      "pspReferenceId": "ea451bf2-26b8-40f8-a0a1-27d95df55871",
                      "timestamp": "2022-08-16T17:20:48.795Z",
                      "status": "COMPLETED",
                      "amount": {
                        "value": 0.02,
                        "currency": "BRL"
                      },
                      "payer": {
                        "id": "1e557cd9-31c8-4b60-86c6-3f8974416e7a"
                      }
                    }
                  },
                  "Status de um pagamento cancelado pelo cliente": {
                    "value": {
                      "installmentNumber": 1,
                      "referenceId": "86371aa1-9e64-4abc-8af9-6400ef23cd69",
                      "pspReferenceId": "ea451bf2-26b8-40f8-a0a1-27d95df55871",
                      "timestamp": "2022-08-16T17:20:48.795Z",
                      "status": "CANCELLED",
                      "code": "CANCELLED_BY_USER",
                      "message": "User has cancelled this payment.",
                      "amount": {
                        "value": 0.02,
                        "currency": "BRL"
                      },
                      "payer": {}
                    }
                  },
                  "Status de um pagamento autorizado e depois pedido o estorno": {
                    "value": {
                      "paymentMethodType": "nupay",
                      "installmentNumber": 1,
                      "referenceId": "595b6e74-0030-43ab-9b89-8f2ec9923272",
                      "pspReferenceId": "ea6dd35a-699e-4dc1-b036-3369f409c8cd",
                      "timestamp": "2019-11-05T19:59:09Z",
                      "status": "COMPLETED",
                      "amount": {
                        "value": 110.01,
                        "currency": "BRL"
                      },
                      "payer": {
                        "id": "1e557cd9-31c8-4b60-86c6-3f8974416e7a"
                      },
                      "refunds": [
                        {
                          "refundId": "F5C1A4E20D3B4E07B7E871F5B5BC9F22",
                          "status": "REFUNDING",
                          "dueDate": null,
                          "transactionRefundId": "234982-abcde-1235",
                          "amount": {
                            "value": 10.01,
                            "currency": "BRL"
                          }
                        }
                      ]
                    }
                  },
                  "Status de um pagamento autorizado e depois pedido o estorno, que não executado por conta de um erro": {
                    "value": {
                      "paymentMethodType": "nupay",
                      "installmentNumber": 1,
                      "referenceId": "595b6e74-0030-43ab-9b89-8f2ec9923272",
                      "pspReferenceId": "ea6dd35a-699e-4dc1-b036-3369f409c8cd",
                      "timestamp": "2019-11-05T19:59:09Z",
                      "status": "COMPLETED",
                      "amount": {
                        "value": 110.01,
                        "currency": "BRL"
                      },
                      "payer": {
                        "id": "1e557cd9-31c8-4b60-86c6-3f8974416e7a"
                      },
                      "refunds": [
                        {
                          "refundId": "F5C1A4E20D3B4E07B7E871F5B5BC9F22",
                          "status": "ERROR",
                          "dueDate": null,
                          "transactionRefundId": "234982-abcde-1235",
                          "amount": {
                            "value": 10.01,
                            "currency": "BRL"
                          },
                          "error": {
                            "type": "PAYMENT_METHOD",
                            "code": "AB03",
                            "message": "Operation failed. Try again."
                          }
                        }
                      ]
                    }
                  }
                }
              }
            },
            "description": ""
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BadRequestErrorResponse"
                },
                "examples": {
                  "Pagamento com campo inválido": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid PaymentOrder id;",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Bad Request"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFoundErrorResponse"
                },
                "examples": {
                  "Pagamento não pode ser localizado": {
                    "value": {
                      "status": 404,
                      "message": "[404] Not found PaymentOrder;",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Not Found"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TooManyRequestsErrorResponse"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "deprecated": false,
        "operationId": "PaymentsStatusByPspReferenceIdGet",
        "summary": "Consultar status de um pagamento",
        "description": "Consulta o status de um pedido.\n\n\nA resposta contém informações sobre o pagamento.\nTambém pode retornar identificação dos estornos, caso exista.\n",
        "x-codeSamples": [
          {
            "lang": "cURL",
            "source": "curl --request GET \\\n     --url 'https://sandbox-api.spinpay.com.br/v1/checkouts/payments/{pspReferenceId}/status' \\\n     --header 'X-Merchant-Key: {X-Merchant-Key}' \\\n     --header 'X-Merchant-Token: {X-Merchant-Token}' \\\n     --header 'Content-Type: application/json'\n"
          }
        ]
      }
    },
    "/v1/checkouts/payments/{pspReferenceId}/cancel": {
      "post": {
        "tags": [
          "Pagamentos"
        ],
        "parameters": [
          {
            "name": "pspReferenceId",
            "description": "ID do pagamento que deseja cancelar",
            "schema": {
              "type": "string"
            },
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CheckoutCancelResponse"
                },
                "examples": {
                  "Cancelamento com sucesso": {
                    "value": {
                      "referenceId": "F5C1A4E20D3B4E07B7E871F5B5BC9F91",
                      "pspReferenceId": "ea6dd35a-699e-4dc1-b036-3369f409c8cd",
                      "status": "CANCELLED"
                    }
                  },
                  "Cancelamento já realizado": {
                    "value": {
                      "referenceId": "F5C1A4E20D3B4E07B7E871F5B5BC9F91",
                      "pspReferenceId": "ea6dd35a-699e-4dc1-b036-3369f409c8cd",
                      "status": "DENIED",
                      "code": "ALREADY_CANCELLED",
                      "message": "This payment was already cancelled."
                    }
                  },
                  "Cancelamento já realizado pelo usuário": {
                    "value": {
                      "referenceId": "F5C1A4E20D3B4E07B7E871F5B5BC9F91",
                      "pspReferenceId": "ea6dd35a-699e-4dc1-b036-3369f409c8cd",
                      "status": "DENIED",
                      "code": "CANCELLED_BY_USER",
                      "message": "This payment was already cancelled."
                    }
                  },
                  "Cancelamento já realizado pelo e-commerce": {
                    "value": {
                      "referenceId": "F5C1A4E20D3B4E07B7E871F5B5BC9F91",
                      "pspReferenceId": "ea6dd35a-699e-4dc1-b036-3369f409c8cd",
                      "status": "DENIED",
                      "code": "CANCELLED_BY_SELLER",
                      "message": "This payment was already cancelled."
                    }
                  }
                }
              }
            },
            "description": ""
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BadRequestErrorResponse"
                },
                "examples": {
                  "Pagamento não pode ser cancelado": {
                    "value": {
                      "status": 400,
                      "message": "[400] Payment cannot be cancelled.",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnauthorizedAuthErrorResponse"
                },
                "examples": {
                  "Ausência do campo X-Merchant-Token obrigatório no header.": {
                    "value": {
                      "status": 401,
                      "message": "[401] Unauthorized appToken header (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
                      "details": {}
                    }
                  },
                  "Ausência do campo X-Merchant-Key obrigatório no header.": {
                    "value": {
                      "status": 401,
                      "message": "[401] Unauthorized appKey header (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFoundErrorResponse"
                },
                "examples": {
                  "Pagamento não pode ser localizado": {
                    "value": {
                      "status": 404,
                      "message": "[404] Not found PaymentOrder;",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Not Found"
          },
          "423": {
            "description": "Locked"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TooManyRequestsErrorResponse"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "deprecated": false,
        "operationId": "PaymentsCancelByPspReferenceIdPost",
        "summary": "Cancelar um pagamento",
        "description": "Cancela um pagament criado, mas que ainda não foi pago, isto é, pagamentos com status `WAITING_PAYMENT_METHOD`.\n\nPara pedidos pagos, deve ser usado o endpoint para [abrir estorno](#operation/PaymentsRefundByPspReferenceIdPost).\n",
        "x-codeSamples": [
          {
            "lang": "cURL",
            "source": "curl --request POST \\\n     --url 'https://sandbox-api.spinpay.com.br/v1/checkouts/payments/{pspReferenceId}/cancel' \\\n     --header 'X-Merchant-Key: {X-Merchant-Key}' \\\n     --header 'X-Merchant-Token: {X-Merchant-Token}' \\\n     --header 'Content-Type: application/json'\n"
          }
        ]
      }
    },
    "/v1/checkouts/payments/{pspReferenceId}/refunds": {
      "post": {
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefundCreationRequest"
              },
              "examples": {
                "Estorno válido": {
                  "value": {
                    "transactionRefundId": "234982-abcde-1235",
                    "amount": {
                      "value": 110.01,
                      "currency": "BRL"
                    },
                    "notes": "Cliente recebeu produto com defeito."
                  }
                }
              }
            }
          },
          "required": true
        },
        "tags": [
          "Estornos"
        ],
        "parameters": [
          {
            "name": "pspReferenceId",
            "description": "ID do pagamento que deseja estornar",
            "schema": {
              "type": "string"
            },
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RefundCreationResponse"
                },
                "examples": {
                  "Estorno solicitado com sucesso": {
                    "value": {
                      "refundId": "fde05f28-486e-4399-b23e-c14a559c1845",
                      "pspReferenceId": "ea6dd35a-699e-4dc1-b036-3369f409c8cd",
                      "status": "REFUNDING",
                      "dueDate": null
                    }
                  },
                  "Estorno não executado por falta de saldo": {
                    "value": {
                      "refundId": "fde05f28-486e-4399-b23e-c14a559c1845",
                      "pspReferenceId": "ea6dd35a-699e-4dc1-b036-3369f409c8cd",
                      "status": "ERROR",
                      "dueDate": null,
                      "error": {
                        "type": "INSUFFICIENT_FUNDS",
                        "message": "Insufficient funds to complete refund. Try again later after new transactions are approved."
                      }
                    }
                  }
                }
              }
            },
            "description": ""
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RefundInvalidResponse"
                },
                "examples": {
                  "Erro de validação do ID do Payment Order": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid PaymentOrder id.",
                      "stackId": "e10a36cd-8cb4-42a1-81e4-a1372ce6731a",
                      "details": {}
                    }
                  },
                  "RefundId já criado anteriormente": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid This refund with transactionRefundId `transactionRefundId` already was requested.",
                      "stackId": "e10a36cd-8cb4-42a1-81e4-a1372ce6731a",
                      "details": {
                        "refundId": "refundId"
                      }
                    }
                  },
                  "Valor de refund inválido": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid Refund amount.",
                      "stackId": "e10a36cd-8cb4-42a1-81e4-a1372ce6731a",
                      "details": {}
                    }
                  },
                  "Pagamento já cancelado": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid This payment was already cancelled.",
                      "stackId": "e10a36cd-8cb4-42a1-81e4-a1372ce6731a",
                      "details": {}
                    }
                  },
                  "Pagamento não pode ser reembolsado": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid This payment can not be refunded.",
                      "stackId": "e10a36cd-8cb4-42a1-81e4-a1372ce6731a",
                      "details": {}
                    }
                  },
                  "Pagamento ainda não pode ser reembolsado": {
                    "value": {
                      "status": 400,
                      "message": "[400] This payment was not settled yet to be refunded. Use cancel endpoint instead.",
                      "stackId": "e10a36cd-8cb4-42a1-81e4-a1372ce6731a",
                      "details": {}
                    }
                  },
                  "Reembolso parcial não permitido": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid This payment can not be partially refund.",
                      "stackId": "e10a36cd-8cb4-42a1-81e4-a1372ce6731a",
                      "details": {}
                    }
                  },
                  "Valor de reembolso excede valor disponível": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid Required refund amount exceeds the amount available.",
                      "stackId": "e10a36cd-8cb4-42a1-81e4-a1372ce6731a",
                      "details": {}
                    }
                  },
                  "Campo obrigatório inválido - transactionRefundId": {
                    "value": {
                      "status": 400,
                      "message": "[400] Request schema validation failed.",
                      "stackId": "e10a36cd-8cb4-42a1-81e4-a1372ce6731a",
                      "details": {
                        "validationErrors": [
                          {
                            "code": "required",
                            "path": "",
                            "message": "should have required property 'transactionRefundId'",
                            "params": {
                              "missingProperty": "transactionRefundId"
                            }
                          }
                        ]
                      }
                    }
                  },
                  "Campo obrigatório inválido - amount": {
                    "value": {
                      "status": 400,
                      "message": "[400] Request schema validation failed.",
                      "stackId": "e10a36cd-8cb4-42a1-81e4-a1372ce6731a",
                      "details": {
                        "validationErrors": [
                          {
                            "code": "required",
                            "path": "",
                            "message": "should have required property 'amount'",
                            "params": {
                              "missingProperty": "amount"
                            }
                          }
                        ]
                      }
                    }
                  },
                  "Campo obrigatório inválido - amount.value": {
                    "value": {
                      "status": 400,
                      "message": "[400] Request schema validation failed.",
                      "stackId": "e10a36cd-8cb4-42a1-81e4-a1372ce6731a",
                      "details": {
                        "validationErrors": [
                          {
                            "code": "required",
                            "path": ".amount",
                            "message": "should have required property 'value'",
                            "params": {
                              "missingProperty": "value"
                            }
                          }
                        ]
                      }
                    }
                  },
                  "Campo obrigatório inválido - amount.currency": {
                    "value": {
                      "status": 400,
                      "message": "[400] Request schema validation failed",
                      "stackId": "e10a36cd-8cb4-42a1-81e4-a1372ce6731a",
                      "details": {
                        "validationErrors": [
                          {
                            "code": "required",
                            "path": ".amount",
                            "message": "should have required property 'currency'",
                            "params": {
                              "missingProperty": "currency"
                            }
                          }
                        ]
                      }
                    }
                  },
                  "Campo obrigatório inválido - amount.currency não disponível": {
                    "value": {
                      "status": 400,
                      "message": "[400] Request schema validation failed.",
                      "stackId": "e10a36cd-8cb4-42a1-81e4-a1372ce6731a",
                      "details": {
                        "validationErrors": [
                          {
                            "code": "enum",
                            "path": ".amount.currency",
                            "message": "should be equal to one of the allowed values",
                            "params": {
                              "allowedValues": [
                                "BRL"
                              ]
                            }
                          }
                        ]
                      }
                    }
                  },
                  "Ausência do header JWS (somente se JWS estiver habilitado para o cliente)": {
                    "value": {
                      "status": 400,
                      "message": "[400] Missing JWS signature header",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnauthorizedAuthErrorResponse"
                },
                "examples": {
                  "Ausência do campo X-Merchant-Key obrigatório no header": {
                    "value": {
                      "status": 401,
                      "message": "[401] Unauthorized Undefined auth appKey header.",
                      "stackId": "ebfe258a-a198-46b5-93e8-4497c1d93f51",
                      "details": {}
                    }
                  },
                  "Ausência do campo X-Merchant-Token obrigatório no header": {
                    "value": {
                      "status": 401,
                      "message": "[401] Unauthorized Undefined auth appToken header.",
                      "stackId": "ebfe258a-a198-46b5-93e8-4497c1d93f51",
                      "details": {}
                    }
                  },
                  "JWS inválido (somente se JWS estiver habilitado para o cliente)": {
                    "value": {
                      "status": 401,
                      "message": "[401] Invalid JWS signature (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
                      "details": {}
                    }
                  },
                  "Chave pública não encontrada (somente se JWS estiver habilitado para o cliente)": {
                    "value": {
                      "status": 401,
                      "message": "[401] Public key not found (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "423": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RefundInvalidResponse"
                },
                "examples": {
                  "Erro de bloqueio": {
                    "value": {
                      "status": 423,
                      "message": "[423] Lock is busy.",
                      "stackId": "2b70fcdf-3cf3-48b9-b9d4-fe9da6448490",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Locked"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TooManyRequestsErrorResponse"
                }
              }
            },
            "description": "Too Many Requests"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RefundInvalidResponse"
                },
                "examples": {
                  "Erro de servidor": {
                    "value": {
                      "status": 500,
                      "message": "Opss. [mensagem de erro]",
                      "stackId": "1d06a5da-b9b2-4f57-9b9f-190b6b12c6c8",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Internal Server Error"
          }
        },
        "deprecated": false,
        "operationId": "PaymentsRefundByPspReferenceIdPost",
        "summary": "Estornar um pagamento",
        "description": "Endpoint utilizado para devolver o valor pago para o consumidor.\n\nÉ possível fazer estorno de valores parciais para NuPay, desde que a soma dos estornos parciais em abertos e concluídos não ultrapassem o valor total do pagamento original.\n\nO status de um estorno é alterado conforme o estorno é processado. É responsabilidade do e-commerce implementar mecanismos de acompanhamento das mudanças de status de um estorno, para isso, consulte a [seção sobre Notificações](#tag/Notificacoes).\n\nOs comprovantes de estornos ficam disponíveis somente por meio do Painel do Lojista.\n\n### Casos especiais\nEm alguns casos, um estorno pode não ser concluído. Alguns deles são:\n\n  - O pagamento foi reautorizado por algum acordo entre NuPay for Business e e-commerce;\n  - Um pedido de estorno foi aberto e cancelado anteriormente para o mesmo pagamento;\n  - Foi solicitado o bloqueio de estornos para o pagamento;\n  - Não há saldo suficiente na conta de pagamento do e-commerce na NuPay for Business;\n  - A conta de origem do pagamento não existe mais.\n\nVocê pode consultar o mapeamento de erros [neste link](/#/checkout/guide/api/refunds/?id=erros-estorno).\nO erro será descrito na resposta da requisição no campo `error`. Consulte os exemplos de resposta ao lado para mais informações.\n",
        "x-codeSamples": [
          {
            "lang": "cURL",
            "source": "curl --request POST \\\n     --url 'https://sandbox-api.spinpay.com.br/v1/checkouts/payments/{pspReferenceId}/refunds' \\\n     --header 'X-Merchant-Key: {X-Merchant-Key}' \\\n     --header 'X-Merchant-Token: {X-Merchant-Token}' \\\n     --header 'Content-Type: application/json' \\\n     --data '{\n       \"transactionRefundId\": \"234982-abcde-1235\",\n       \"amount\": {\n         \"value\": 110.01,\n         \"currency\": \"BRL\"\n       },\n       \"notes\": \"Cliente recebeu produto com defeito.\"\n     }'\n"
          }
        ]
      }
    },
    "/v1/checkouts/payments/{pspReferenceId}/refunds/{refundId}": {
      "get": {
        "tags": [
          "Estornos"
        ],
        "parameters": [
          {
            "name": "refundId",
            "description": "ID do estorno do pagamento que deseja consultar.",
            "schema": {
              "type": "string"
            },
            "in": "path",
            "required": true
          },
          {
            "name": "pspReferenceId",
            "description": "ID do pagamento do estorno.",
            "schema": {
              "type": "string"
            },
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RefundStatusResponse"
                },
                "examples": {
                  "Estorno sendo processado": {
                    "value": {
                      "refundId": "F5C1A4E20D3B4E07B7E871F5B5BC9F22",
                      "pspReferenceId": "ea6dd35a-699e-4dc1-b036-3369f409c8cd",
                      "transactionRefundId": "234982-abcde-1235",
                      "status": "REFUNDING",
                      "dueDate": null,
                      "amount": {
                        "value": 10.01,
                        "currency": "BRL"
                      }
                    }
                  },
                  "Estorno realizado com sucesso": {
                    "value": {
                      "refundId": "F5C1A4E20D3B4E07B7E871F5B5BC9F22",
                      "pspReferenceId": "ea6dd35a-699e-4dc1-b036-3369f409c8cd",
                      "transactionRefundId": "234982-abcde-1235",
                      "status": "REFUNDED",
                      "dueDate": null,
                      "amount": {
                        "value": 10.01,
                        "currency": "BRL"
                      }
                    }
                  },
                  "Estorno não executado por conta de um erro": {
                    "value": {
                      "refundId": "F5C1A4E20D3B4E07B7E871F5B5BC9F22",
                      "pspReferenceId": "ea6dd35a-699e-4dc1-b036-3369f409c8cd",
                      "status": "ERROR",
                      "dueDate": null,
                      "amount": {
                        "value": 10.01,
                        "currency": "BRL"
                      },
                      "error": {
                        "type": "PAYMENT_METHOD",
                        "code": "AB03",
                        "message": "Operation failed. Try again."
                      }
                    }
                  }
                }
              }
            },
            "description": "Success"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RefundInvalidResponse"
                },
                "examples": {
                  "RefundID preenchido com id inválido.": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid Refund id; (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnauthorizedAuthErrorResponse"
                },
                "examples": {
                  "Ausência do campo X-Merchant-Token obrigatório no header.": {
                    "value": {
                      "status": 401,
                      "message": "[401] Unauthorized appToken header (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
                      "details": {}
                    }
                  },
                  "Ausência do campo X-Merchant-Key obrigatório no header.": {
                    "value": {
                      "status": 401,
                      "message": "[401] Unauthorized appKey header (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TooManyRequestsErrorResponse"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "operationId": "PaymentsRefundByIdGet",
        "summary": "Consultar um estorno",
        "description": "Este endpoint retorna as informações do estorno (`refundId`) de um pagamento (`pspReferenceId`),  especificados como parâmetros na requisição.\n",
        "x-codeSamples": [
          {
            "lang": "cURL",
            "source": "curl --request GET \\\n     --url 'https://sandbox-api.spinpay.com.br/v1/checkouts/payments/{pspReferenceId}/refunds/{refundId}' \\\n     --header 'X-Merchant-Key: {X-Merchant-Key}' \\\n     --header 'X-Merchant-Token: {X-Merchant-Token}' \\\n     --header 'Content-Type: application/json'\n"
          }
        ]
      }
    },
    "/v1/{callbackUrl}": {
      "post": {
        "tags": [
          "Notificações"
        ],
        "summary": "Notificações de atualização de status de pedido",
        "description": "**Lembrete:** esse endpoint deve ser implementado **pelo e-commerce**, e não pela NuPay for Business.\n\nConsulte a seção sobre [Notificações de eventos](/#/checkout/guide/api/notifications/) para mais detalhes.",
        "operationId": "PaymentOrderNotificationCallback",
        "parameters": [
          {
            "name": "callbackUrl",
            "description": "URL de callback fornecida na criação do pagamento.",
            "schema": {
              "type": "string"
            },
            "in": "path",
            "required": true
          },
          {
            "name": "X-Spin-Signature",
            "in": "header",
            "description": "Assinatura da chamada",
            "example": "UVhslgtbavMol9u8iAQsy5NtmlcYZnfbJ7XtnlFzV7B9NNG7C6Z4RQj2k3+wWcJKUP9selY9UPGtgwgmvG6dfg==",
            "schema": {
              "type": "string"
            },
            "deprecated": true
          },
          {
            "name": "X-Spin-Timestamp",
            "in": "header",
            "description": "Timestamp da chamada",
            "example": "2020-01-01T14:22:18.572Z",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PaymentOrderNotificationCallback"
              },
              "examples": {
                "NuPay": {
                  "$ref": "#/components/examples/NuPayNotificationCallbackExample"
                },
                "Pix": {
                  "$ref": "#/components/examples/PixNotificationCallbackExample"
                }
              }
            }
          }
        },
        "security": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/html": {
                "example": ""
              }
            }
          },
          "401": {
            "description": "Houve um erro de validação na assinatura da notificação",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotificationCallbackErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v1/{callbackUrl}/refunds": {
      "post": {
        "tags": [
          "Notificações"
        ],
        "summary": "Notificações de atualização de status de estorno",
        "operationId": "RefundNotificationCallback",
        "description": "**Lembrete:** esse endpoint deve ser implementado **pelo e-commerce**, e não pela NuPay for Business.\n\nConsulte a seção sobre [Notificações de eventos](/#/checkout/guide/api/notifications/) para mais detalhes.",
        "parameters": [
          {
            "name": "callbackUrl",
            "description": "URL de callback fornecida na criação do pagamento.",
            "schema": {
              "type": "string"
            },
            "in": "path",
            "required": true
          },
          {
            "name": "X-Spin-Signature",
            "in": "header",
            "description": "Assinatura da chamada",
            "example": "UVhslgtbavMol9u8iAQsy5NtmlcYZnfbJ7XtnlFzV7B9NNG7C6Z4RQj2k3+wWcJKUP9selY9UPGtgwgmvG6dfg==",
            "schema": {
              "type": "string"
            },
            "deprecated": true
          },
          {
            "name": "X-Spin-Timestamp",
            "in": "header",
            "description": "Timestamp da chamada",
            "example": "2020-01-01T14:22:18.572Z",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefundNotificationCallback"
              },
              "examples": {
                "Notificação de estorno": {
                  "$ref": "#/components/examples/RefundNotificationCallbackExample"
                }
              }
            }
          }
        },
        "security": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/html": {
                "example": ""
              }
            }
          },
          "401": {
            "description": "Houve um erro de validação na assinatura da notificação",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotificationCallbackErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v1/authorize": {
      "get": {
        "tags": [
          "Autorização para app - OAuth2"
        ],
        "parameters": [
          {
            "name": "client_id",
            "in": "query",
            "description": "Client ID gerado pelo time NuPay e informado no momento do onboarding.",
            "schema": {
              "type": "string"
            },
            "required": true,
            "example": "234982-abcde-1235"
          },
          {
            "name": "scope",
            "in": "query",
            "description": "Array de strings com os escopos desejados.\n\nEscopo | Descrição\n- | -\n**charge** | Escopo com permissão para cobranças.\n**refund** | Escopo com permissão para estornos.\n**payment_conditions** | Escopo com permissão para consulta de condições de pagamento.",
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "required": true,
            "example": [
              "charge",
              "refund",
              "payment_conditions"
            ]
          },
          {
            "name": "response_type",
            "in": "query",
            "description": "Envie o valor `code`.",
            "schema": {
              "type": "string",
              "default": "code"
            },
            "required": true
          },
          {
            "name": "redirect_uri",
            "in": "query",
            "description": "URL a ser utilizada para redirecionar o cliente de volta ao e-commerce uma vez que concluir a autorização no app do Nubank. Os atributos `code` e `state` são enviados como query parameter. O protocolo deve ser sempre `HTTPS`",
            "schema": {
              "type": "string"
            },
            "required": true,
            "example": "https://merchant-domain.com/redirect-uri"
          },
          {
            "name": "state",
            "in": "query",
            "description": "Estado de validação gerado pelo e-commerce que será retornado na URL de resposta e pode ser utilizado para validar a resposta.",
            "schema": {
              "type": "string"
            },
            "required": true,
            "example": "0b10616b-3aa7-4b1c-a902-3e85b2549025"
          },
          {
            "name": "code_challenge",
            "in": "query",
            "description": "Valor alfanumérico gerada pelo e-commerce, deve ser armazenada para uso posterior.",
            "schema": {
              "type": "string"
            },
            "required": true,
            "example": "415594c595621aa3ae171843f1f256fa4920ca5da06eeccdd6f2bab9edc8e818"
          },
          {
            "name": "code_challenge_method",
            "in": "query",
            "description": "Tipo de validação do `code_challenge`, deve-se sempre enviar `S256`.",
            "schema": {
              "type": "string",
              "default": "S256"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetAuthorizationLink200Response"
                },
                "examples": {
                  "URL gerada com sucesso": {
                    "value": {
                      "redirect_uri": "https://nuapp.nubank.com.br/bdc/omniknight/expr/pre-authorized-payments.home-screen?merchant-name=merchant-name&ticket=Ge24tKp1ahrTf5XCsqhPaGB239SD_2oT4gx8A-aRfoE&merchant-source-id=06a69086-6030-4b78-93ef-3a8dfa6e3a7e&state=a7631935-c95b-4570-a9c1-ce4e94623f92"
                    }
                  },
                  "Resposta erro invalid_request": {
                    "description": "Resposta erro invalid_request",
                    "value": {
                      "redirect_uri": "https://merchant.app.link/authorize?error=invalid_request&error_description=Invalid+code+challenge+method&state=a7631935-c95b-4570-a9c1-ce4e94623f92"
                    }
                  },
                  "Resposta erro invalid_scope": {
                    "description": "Resposta erro invalid_scope",
                    "value": {
                      "redirect_uri": "https://merchant.app.link/authorize?error=invalid_scope&error_description=Internal+scope&state=a7631935-c95b-4570-a9c1-ce4e94623f92"
                    }
                  },
                  "Resposta erro unsupported_response_type": {
                    "description": "Resposta erro unsupported_response_type",
                    "value": {
                      "redirect_uri": "https://merchant.app.link/authorize?error=unsupported_response_type&error_description=Invalid+response+type&state=a7631935-c95b-4570-a9c1-ce4e94623f92"
                    }
                  },
                  "Resposta erro server_error": {
                    "value": {
                      "redirect_uri": "https://merchant.app.link/authorize?error=server_error&error_description=Internal+server+error&state=a7631935-c95b-4570-a9c1-ce4e94623f92"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetAuthorizationLink400Response"
                },
                "examples": {
                  "Header appToken ausente": {
                    "value": {
                      "error": "invalid_request",
                      "error_description": "Undefined auth appToken header",
                      "state": "0b10616b-3aa7-4b1c-a902-3e85b2549025"
                    }
                  },
                  "Header appKey ausente": {
                    "value": {
                      "error": "invalid_request",
                      "error_description": "Undefined auth appKey header",
                      "state": "0b10616b-3aa7-4b1c-a902-3e85b2549025"
                    }
                  },
                  "IP não liberado": {
                    "value": {
                      "error": "invalid_request",
                      "error_description": "Could not resolve client IP",
                      "state": "0b10616b-3aa7-4b1c-a902-3e85b2549025"
                    }
                  }
                }
              }
            }
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TooManyRequestsErrorResponse"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "security": [
          {
            "MerchantApiKey": [],
            "MerchantApiToken": []
          }
        ],
        "deprecated": false,
        "operationId": "GenerateAuthorizationUrl",
        "servers": [
          {
            "url": "https://sandbox-authentication.spinpay.com.br/api",
            "description": "Servidor de Testes (Sandbox)"
          },
          {
            "url": "https://authentication.spinpay.com.br/api",
            "description": "Servidor de Produção"
          }
        ],
        "summary": "Gerar URL de autorização",
        "description": "Endpoint para obter a URL de redirecionamento do cliente associada à tela de autorização dentro do aplicativo do Nubank.",
        "x-codeSamples": [
          {
            "lang": "cURL",
            "source": "curl --request GET \\\n     --url 'https://sandbox-authentication.spinpay.com.br/api/v1/authorize?client_id={client_id}&scope=charge&scope=refund&scope=payment_conditions&response_type=code&redirect_uri={redirect_uri}&state={state}&code_challenge={code_challenge}&code_challenge_method=S256' \\\n     --header 'X-Merchant-Key: {X-Merchant-Key}' \\\n     --header 'X-Merchant-Token: {X-Merchant-Token}' \\\n     --header 'Content-Type: application/json'\n"
          }
        ]
      }
    },
    "/v1/token": {
      "post": {
        "tags": [
          "Tokens de autorização"
        ],
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "oneOf": [
                  {
                    "$ref": "#/components/schemas/OAuthAuthorizationCodeRequest"
                  },
                  {
                    "$ref": "#/components/schemas/OAuthRefreshTokenRequest"
                  },
                  {
                    "$ref": "#/components/schemas/CibaAccessTokenRequest"
                  }
                ]
              },
              "examples": {
                "OAuth - Requisição authorization code": {
                  "value": {
                    "client_assertion_type": "urn%3Aietf%3Aparams%3Aoauth%3Aclient-assertion-type%3Ajwt-bearer",
                    "client_assertion": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9....",
                    "grant_type": "authorization_code",
                    "code": "1e557cd9-31c8-4b60-86c6-3f8974416e7a",
                    "redirect_uri": "https://merchant-domain.com/redirect-uri",
                    "code_verifier": "4alk121agfg"
                  }
                },
                "OAuth - Requisição refresh token": {
                  "value": {
                    "client_assertion_type": "urn%3Aietf%3Aparams%3Aoauth%3Aclient-assertion-type%3Ajwt-bearer",
                    "client_assertion": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9....",
                    "grant_type": "refresh_token",
                    "refresh_token": "979d887a-2c63-4719-ba65-0b20b50f1cab",
                    "code_verifier": "4alk121agfg"
                  }
                },
                "CIBA - Requisição access token": {
                  "value": {
                    "client_id": "1012345678910",
                    "client_assertion_type": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
                    "client_assertion": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9....",
                    "grant_type": "refresh_token",
                    "refresh_token": "979d887a-2c63-4719-ba65-0b20b50f1cab"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/OAuthAuthorizationCode200Response"
                    },
                    {
                      "$ref": "#/components/schemas/OAuthRefreshToken200Response"
                    },
                    {
                      "$ref": "#/components/schemas/CibaAccessToken200Response"
                    }
                  ]
                },
                "examples": {
                  "OAuth - Resposta authorization code": {
                    "value": {
                      "access_token": "1ceb3a86-3a7e-479f-bee7-d8bb025809c2",
                      "token_type": "Bearer",
                      "expires_in": 300,
                      "refresh_token": "979d887a-2c63-4719-ba65-0b20b50f1cab"
                    }
                  },
                  "OAuth - Resposta refresh token": {
                    "value": {
                      "access_token": "1ceb3a86-3a7e-479f-bee7-d8bb025809c2",
                      "token_type": "Bearer",
                      "expires_in": 300,
                      "refresh_token": "979d887a-2c63-4719-ba65-0b20b50f1cab"
                    }
                  },
                  "CIBA - Resposta access token": {
                    "value": {
                      "access_token": "1ceb3a86-3a7e-479f-bee7-d8bb025809c2",
                      "token_type": "Bearer",
                      "expires_in": 300,
                      "refresh_token": "979d887a-2c63-4719-ba65-0b20b50f1cab"
                    }
                  }
                }
              }
            },
            "description": ""
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/OAuthAuthorizationCode400Response"
                    },
                    {
                      "$ref": "#/components/schemas/OAuthRefreshToken400Response"
                    },
                    {
                      "$ref": "#/components/schemas/CibaAccessToken400Response"
                    }
                  ]
                },
                "examples": {
                  "OAuth - Resposta authorization code error": {
                    "value": {
                      "error": "invalid_request",
                      "error_description": "Error while generating token",
                      "state": "XXX"
                    }
                  },
                  "OAuth - Resposta refresh token error": {
                    "value": {
                      "error": "invalid_request",
                      "error_description": "Error while generating token",
                      "state": "XXX"
                    }
                  },
                  "CIBA - Resposta access token error": {
                    "value": {
                      "error": "invalid_request",
                      "error_description": "Error while generating token"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TooManyRequestsErrorResponse"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "security": [
          {
            "MerchantApiKey": [],
            "MerchantApiToken": []
          }
        ],
        "deprecated": false,
        "operationId": "GenerateToken",
        "servers": [
          {
            "url": "https://sandbox-authentication.spinpay.com.br/api",
            "description": "Servidor de Testes (Sandbox)"
          },
          {
            "url": "https://authentication.spinpay.com.br/api",
            "description": "Servidor de Produção"
          }
        ],
        "summary": "Gerar refresh e access token",
        "description": "Endpoint para gerar um `refresh_token` a partir do `code` (apenas para OAuth) ou gerar um `access_token` a partir de um `refresh_token` (OAuth ou CIBA). \nO endpoint é o mesmo para os protocolos OAuth e CIBA, porém os campos a serem enviados na requisição são diferentes, como mostra os exemplos ao lado.\n### Access token\nO `access_token` possui validade de 5 minutos e sempre será invalidado quando um novo for solicitado.\n### Refresh token\nO `refresh_token` deve ser armazenado. É utilizado toda vez que uma solicitação de `access_token` for necessária.\n\n**Após o tempo de expiração do refresh_token, é necessário refazer o processo de autorização do NuPay.**",
        "x-codeSamples": [
          {
            "lang": "cURL",
            "label": "cURL - OAuth Auth Code",
            "source": "curl --request POST \\\n     --url 'https://sandbox-authentication.spinpay.com.br/api/v1/token' \\\n     --header 'X-Merchant-Key: {X-Merchant-Key}' \\\n     --header 'X-Merchant-Token: {X-Merchant-Token}' \\\n     --header 'Content-Type: application/x-www-form-urlencoded' \\\n     --data 'client_assertion_type=urn%3Aietf%3Aparams%3Aoauth%3Aclient-assertion-type%3Ajwt-bearer&client_assertion={client_assertion}&grant_type=authorization_code&code={code}&redirect_uri={redirect_uri}&code_verifier={code_verifier}'\n"
          },
          {
            "lang": "cURL",
            "label": "cURL - OAuth Refresh Token",
            "source": "curl --request POST \\\n     --url 'https://sandbox-authentication.spinpay.com.br/api/v1/token' \\\n     --header 'X-Merchant-Key: {X-Merchant-Key}' \\\n     --header 'X-Merchant-Token: {X-Merchant-Token}' \\\n     --header 'Content-Type: application/x-www-form-urlencoded' \\\n     --data 'client_assertion_type=urn%3Aietf%3Aparams%3Aoauth%3Aclient-assertion-type%3Ajwt-bearer&client_assertion={client_assertion}&grant_type=refresh_token&refresh_token={refresh_token}&code_verifier={code_verifier}'\n"
          },
          {
            "lang": "cURL",
            "label": "cURL - CIBA Access Token",
            "source": "curl --request POST \\\n     --url 'https://sandbox-authentication.spinpay.com.br/api/v1/token' \\\n     --header 'X-Merchant-Key: {X-Merchant-Key}' \\\n     --header 'X-Merchant-Token: {X-Merchant-Token}' \\\n     --header 'Content-Type: application/x-www-form-urlencoded' \\\n     --data 'client_id={client_id}&client_assertion_type=urn%3Aietf%3Aparams%3Aoauth%3Aclient-assertion-type%3Ajwt-bearer&client_assertion={client_assertion}&grant_type=refresh_token&refresh_token={refresh_token}'\n"
          }
        ]
      }
    },
    "/v1/backchannel/authentication": {
      "post": {
        "tags": [
          "Autorização para web - CIBA",
          "Autorização para web - OTP"
        ],
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "oneOf": [
                  {
                    "$ref": "#/components/schemas/CibaAuthorizationRequest"
                  }
                ]
              },
              "examples": {
                "Requisição access token": {
                  "value": {
                    "parameters": "login_hint={{customerCPF}}&scope=openid&scope=charge&scope=payment_conditions&client_notification_token={{clientNotificationToken}}&client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer&client_assertion={{clientAssertion}}"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/CibaAuthorization200Response"
                    }
                  ]
                },
                "examples": {
                  "Resposta CIBA": {
                    "value": {
                      "auth_req_id": "FiKSlYqrvApAtE9uIirrWFsLb5l7wR9CWUfG4YqJiXw",
                      "expires_in": 600
                    }
                  },
                  "Resposta OTP": {
                    "value": {
                      "auth_req_id": "FiKSlYqrvApAtE9uIirrWFsLb5l7wR9CWUfG4YqJiXw",
                      "masked_phone_number": "(11)xxxxx-1234",
                      "ticket": "AbCdEfGhIjKlMnOpQrStUvWxYz1234567890",
                      "expires_in": 600
                    }
                  }
                }
              }
            },
            "description": ""
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/CibaAuthorization400Response"
                    }
                  ]
                },
                "examples": {
                  "Request com parâmetros inválidos": {
                    "value": {
                      "error": "invalid_request",
                      "error_description": "Invalid login_hint"
                    }
                  },
                  "Client informado não é válido": {
                    "value": {
                      "error": "invalid_client"
                    }
                  },
                  "Customer não é elegível ao OTP (OTP Apenas)": {
                    "value": {
                      "error": "not_eligible",
                      "error_description": "Customer is not eligible for OTP tokenization"
                    }
                  },
                  "Um ou mais escopos enviados na requisição são inválidos": {
                    "value": {
                      "error": "invalid_scope",
                      "error_description": "Invalid scope"
                    }
                  },
                  "Client não autorizado": {
                    "value": {
                      "error": "unauthorized_client"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TooManyRequestsErrorResponse"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "security": [
          {
            "MerchantApiKey": [],
            "MerchantApiToken": []
          }
        ],
        "deprecated": false,
        "servers": [
          {
            "url": "https://sandbox-authentication.spinpay.com.br/api",
            "description": "Servidor de Testes (Sandbox)"
          },
          {
            "url": "https://authentication.spinpay.com.br/api",
            "description": "Servidor de Produção"
          }
        ],
        "summary": "Gerar autorização",
        "operationId": "backchannelAuthentication",
        "description": "Esse endpoint deve ser chamado para iniciar o processo de autenticação via CIBA (Client-Initiated Backchannel Authentication) ou OTP (One-Time Password).",
        "x-codeSamples": [
          {
            "lang": "cURL",
            "source": "curl --request POST \\\n     --url 'https://sandbox-authentication.spinpay.com.br/api/v1/backchannel/authentication' \\\n     --header 'X-Merchant-Key: {X-Merchant-Key}' \\\n     --header 'X-Merchant-Token: {X-Merchant-Token}' \\\n     --header 'Content-Type: application/x-www-form-urlencoded' \\\n     --data 'parameters=login_hint%3D{login_hint}%26client_assertion_type%3D{client_assertion_type}%26client_assertion%3D{client_assertion}%26client_notification_token%3D{client_notification_token}%26scope%3D{scope}%26scope%3D{scope}%26auth_method%3D{auth_method}'\n"
          }
        ]
      }
    },
    "/v1/backchannel/authentication/complete": {
      "post": {
        "tags": [
          "Autorização para web - OTP"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "oneOf": [
                  {
                    "$ref": "#/components/schemas/OTPCompleteRequest"
                  }
                ]
              },
              "examples": {
                "Requisição de validação OTP": {
                  "value": {
                    "parameters": "login_hint=<customer-CPF>&client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer&client_assertion=<client-assertion>",
                    "otp": "123456",
                    "ticket": "Ge24tKp1ahrTf5XCsqhPaGB239SD_2oT4gx8A-aRfoE"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/OTPComplete200Response"
                    }
                  ]
                },
                "examples": {
                  "Resposta auth_code": {
                    "value": {
                      "access_token": "AbCdEfGhIjKlMnOpQrStUvWxYz1234567890",
                      "refresh_token": "FiKSlYqrvApAtE9uIirrWFsLb5l7wR9CWUf"
                    }
                  }
                }
              }
            },
            "description": ""
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/OTPComplete400Response"
                    }
                  ]
                },
                "examples": {
                  "Resposta validação de OTP error": {
                    "value": {
                      "error": "invalid_request",
                      "error_description": "Invalid parameter"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TooManyRequestsErrorResponse"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "security": [
          {
            "MerchantApiKey": [],
            "MerchantApiToken": []
          }
        ],
        "deprecated": false,
        "servers": [
          {
            "url": "https://sandbox-authentication.spinpay.com.br/api",
            "description": "Servidor de Testes (Sandbox)"
          },
          {
            "url": "https://authentication.spinpay.com.br/api",
            "description": "Servidor de Produção"
          }
        ],
        "summary": "Validar código OTP",
        "operationId": "backchannelCompleteOTP",
        "description": "Esse endpoint deve ser chamado para completar o processo de autenticação via OTP (One-Time Password), validando o código de autenticação recebido pelo cliente.",
        "x-codeSamples": [
          {
            "lang": "cURL",
            "source": "curl --request POST \\\n     --url 'https://sandbox-authentication.spinpay.com.br/api/v1/backchannel/authentication/complete' \\\n     --header 'X-Merchant-Key: {X-Merchant-Key}' \\\n     --header 'X-Merchant-Token: {X-Merchant-Token}' \\\n     --header 'Content-Type: application/json' \\\n     --data '{\n       \"parameters\": \"login_hint={customerCPF}&client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer&client_assertion={clientAssertion}\",\n       \"otp\": \"123456\",\n       \"ticket\": \"Ge24tKp1ahrTf5XCsqhPaGB239SD_2oT4gx8A-aRfoE\"\n     }'\n"
          }
        ]
      }
    },
    "/v1/backchannel/authentication/otp/resend": {
      "post": {
        "tags": [
          "Autorização para web - OTP"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "oneOf": [
                  {
                    "$ref": "#/components/schemas/OTPResendRequest"
                  }
                ]
              },
              "examples": {
                "Requisição de reenvio de OTP": {
                  "value": {
                    "login_hint": "12345678909",
                    "ticket": "Ge24tKp1ahrTf5XCsqhPaGB239SD_2oT4gx8A-aRfoE"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "No Content",
            "content": {}
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/OTPResend400Response"
                    }
                  ]
                },
                "examples": {
                  "Request com parâmetros inválidos": {
                    "value": {
                      "error": "invalid_request",
                      "error_description": "Invalid login_hint"
                    }
                  },
                  "Client informado não é válido": {
                    "value": {
                      "error": "invalid_client"
                    }
                  },
                  "Customer não é elegível ao OTP": {
                    "value": {
                      "error": "not_eligible",
                      "error_description": "Customer is not eligible for OTP tokenization"
                    }
                  },
                  "Client não autorizado": {
                    "value": {
                      "error": "unauthorized_client"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TooManyRequestsErrorResponse"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "security": [
          {
            "MerchantApiKey": [],
            "MerchantApiToken": []
          }
        ],
        "deprecated": false,
        "servers": [
          {
            "url": "https://sandbox-authentication.spinpay.com.br/api",
            "description": "Servidor de Testes (Sandbox)"
          },
          {
            "url": "https://authentication.spinpay.com.br/api",
            "description": "Servidor de Produção"
          }
        ],
        "summary": "Reenviar código OTP",
        "operationId": "backchannelResendOTP",
        "description": "Esse endpoint deve ser chamado para reenviar o código OTP (One-Time Password) para o cliente.",
        "x-codeSamples": [
          {
            "lang": "cURL",
            "source": "curl --request POST \\\n     --url 'https://sandbox-authentication.spinpay.com.br/api/v1/backchannel/authentication/otp/resend' \\\n     --header 'X-Merchant-Key: {X-Merchant-Key}' \\\n     --header 'X-Merchant-Token: {X-Merchant-Token}' \\\n     --header 'Content-Type: application/json' \\\n     --data '{\n       \"login_hint\": \"12345678909\",\n       \"ticket\": \"Ge24tKp1ahrTf5XCsqhPaGB239SD_2oT4gx8A-aRfoE\"\n     }'\n"
          }
        ]
      }
    },
    "/v1/backchannel/{callbackUrl}": {
      "post": {
        "tags": [
          "Autorização para web - CIBA"
        ],
        "summary": "Notificação de autorização",
        "description": "**Lembrete:** esse endpoint deve ser implementado **pelo e-commerce**, e não pela NuPay for Business.",
        "security": [],
        "operationId": "CibaAuthorizationNotificationCallback",
        "parameters": [
          {
            "in": "header",
            "name": "Authorization",
            "schema": {
              "type": "string"
            },
            "required": true,
            "description": "Token informado na requisição /backchannel/authentication na propriedade `client_notification_token` seguindo o formato: Bearer **client_notification_token**"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CibaAuthorizationNotificationRequest"
              },
              "examples": {
                "Notificação de sucesso": {
                  "$ref": "#/components/examples/CibaAuthenticationNotificationSuccess"
                },
                "Notificação de erro": {
                  "$ref": "#/components/examples/CibaAuthenticationNotificationError"
                },
                "Cliente não autorizou o consentimento": {
                  "$ref": "#/components/examples/CibaAuthenticationNotificationDenyAuthorization"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/html": {
                "example": ""
              }
            }
          }
        },
        "servers": [
          {
            "url": "https://{api.merchant}.com/",
            "description": "Servidor de Testes (Sandbox)"
          },
          {
            "url": "https://{merchant-api}.com/",
            "description": "Servidor de Produção"
          }
        ]
      }
    },
    "/v1/checkouts/payment-conditions?amount={amount}": {
      "get": {
        "tags": [
          "Condições de pagamento com Token"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "required": true,
            "in": "header",
            "description": "Recebe o Bearer `access_token`.",
            "example": "Bearer UVhslgtbavMol9u8",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "amount",
            "required": true,
            "in": "query",
            "description": "Valor a ser pago.",
            "schema": {
              "type": "number",
              "format": "double"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaymentConditionResponse"
                },
                "examples": {
                  "Débito e Crédito": {
                    "value": [
                      {
                        "type": "debit",
                        "amount": 2000,
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2000
                          }
                        ]
                      },
                      {
                        "type": "credit",
                        "amount": 2000,
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2000
                          },
                          {
                            "quantity": 2,
                            "amount": 1000
                          },
                          {
                            "quantity": 3,
                            "amount": 729.52,
                            "amountPercentage": 100,
                            "interest": 0.05,
                            "interestAmount": 34.67,
                            "iof": 16.29,
                            "iofPercentage": 0.008,
                            "totalAmount": 2188.57,
                            "totalAmountPercentage": 1.08,
                            "amountContracted": 2016.29,
                            "amountContractedPercentage": 1,
                            "cet": 0.88
                          }
                        ]
                      }
                    ]
                  },
                  "Débito": {
                    "value": [
                      {
                        "type": "debit",
                        "amount": 2000,
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2000
                          }
                        ]
                      }
                    ]
                  },
                  "Crédito": {
                    "value": [
                      {
                        "type": "credit",
                        "amount": 2000,
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2000
                          },
                          {
                            "quantity": 2,
                            "amount": 1000
                          },
                          {
                            "quantity": 3,
                            "amount": 729.52,
                            "amountPercentage": 100,
                            "interest": 0.05,
                            "interestAmount": 34.67,
                            "iof": 16.29,
                            "iofPercentage": 0.008,
                            "totalAmount": 2188.57,
                            "totalAmountPercentage": 1.08,
                            "amountContracted": 2016.29,
                            "amountContractedPercentage": 1,
                            "cet": 0.88
                          }
                        ]
                      }
                    ]
                  }
                }
              }
            },
            "description": "Success"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BadRequestErrorResponse"
                },
                "examples": {
                  "Campos obrigatórios inválidos": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid amount; (stackId: 68b4d6eb-c57e-4076-9200-906b7206272d)",
                      "details": {},
                      "stackId": "68b4d6eb-c57e-4076-9200-906b7206272d"
                    }
                  },
                  "Merchant não possui taxas cadastradas": {
                    "value": {
                      "status": 400,
                      "message": "[400] Merchant has no fees registered. (stackId: 8981263d-ecc6-48c6-b67a-78b55f3dfcbd)",
                      "details": {},
                      "stackId": "8981263d-ecc6-48c6-b67a-78b55f3dfcbd"
                    }
                  },
                  "Saldo e Limite insuficientes": {
                    "value": {
                      "status": 400,
                      "message": "[400] Payment options not available. (stackId: 7ca15c9f-c822-4711-8a75-5acc3e4ca265)",
                      "details": {},
                      "stackId": "7ca15c9f-c822-4711-8a75-5acc3e4ca265"
                    }
                  }
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnauthorizedAuthErrorResponse"
                },
                "examples": {
                  "Ausência do campo X-Merchant-Token obrigatório no header.": {
                    "value": {
                      "status": 401,
                      "message": "[401] Unauthorized appToken header (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
                      "stackId\"": "cb3333-f33d-3c3f-b33e-f3f33333fe3f",
                      "details": {}
                    }
                  },
                  "Ausência do campo X-Merchant-Key obrigatório no header.": {
                    "value": {
                      "status": 401,
                      "message": "[401] Unauthorized appKey header (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
                      "stackId\"": "cb3333-f33d-3c3f-b33e-f3f33333fe3f",
                      "details": {}
                    }
                  },
                  "Ausência do escopo payment_conditions no token do header Authorization.": {
                    "value": {
                      "status": 401,
                      "message": "\"[401] Http request error 401: {\\\"error\\\":\\\"Unauthorized\\\"} (stackId: f874dcac-b026-4105-9b90-bf74953bc59c)\"",
                      "stackId\"": "f874dcac-b026-4105-9b90-bf74953bc59c",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TooManyRequestsErrorResponse"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "deprecated": true,
        "operationId": "PaymentConditionsGet",
        "summary": "Consultar condições de pagamento com Token",
        "description": "Este endpoint retorna as opções de pagamentos e de parcelamento disponíveis para uma determinada compra. A resposta do endpoint varia de acordo com o cliente e a compra. Não utilize cache para esta consulta.\n> **Importante:** Para consultar as condições de pagamento, verifique se a [autorização](#operation/GenerateAuthorizationUrl) foi feita com o escopo `payment_conditions`.\n\nO header `Authorization` é necessário somente para pagamentos **pré-autorizado** de NuPay."
      }
    },
    "/v1/checkouts/payment-conditions": {
      "post": {
        "tags": [
          "Condições de pagamento CPF"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PaymentConditions"
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaymentConditionResponse"
                },
                "examples": {
                  "Débito e Crédito": {
                    "value": [
                      {
                        "type": "debit",
                        "amount": 2000,
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2000
                          }
                        ]
                      },
                      {
                        "type": "credit",
                        "amount": 2000,
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2000
                          },
                          {
                            "quantity": 2,
                            "amount": 1000
                          },
                          {
                            "quantity": 3,
                            "amount": 729.52,
                            "amountPercentage": 100,
                            "interest": 0.05,
                            "interestAmount": 34.67,
                            "iof": 16.29,
                            "iofPercentage": 0.008,
                            "totalAmount": 2188.57,
                            "totalAmountPercentage": 1.08,
                            "amountContracted": 2016.29,
                            "amountContractedPercentage": 1,
                            "cet": 0.88
                          }
                        ]
                      }
                    ]
                  },
                  "Débito": {
                    "value": [
                      {
                        "type": "debit",
                        "amount": 2000,
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2000
                          }
                        ]
                      }
                    ]
                  },
                  "Crédito": {
                    "value": [
                      {
                        "type": "credit",
                        "amount": 2000,
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2000
                          },
                          {
                            "quantity": 2,
                            "amount": 1000
                          },
                          {
                            "quantity": 3,
                            "amount": 729.52,
                            "amountPercentage": 100,
                            "interest": 0.05,
                            "interestAmount": 34.67,
                            "iof": 16.29,
                            "iofPercentage": 0.008,
                            "totalAmount": 2188.57,
                            "totalAmountPercentage": 1.08,
                            "amountContracted": 2016.29,
                            "amountContractedPercentage": 1,
                            "cet": 0.88
                          }
                        ]
                      }
                    ]
                  }
                }
              }
            },
            "description": "Success"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BadRequestErrorResponse"
                },
                "examples": {
                  "Campos obrigatórios inválidos": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid amount; (stackId: 68b4d6eb-c57e-4076-9200-906b7206272d)",
                      "details": {},
                      "stackId": "68b4d6eb-c57e-4076-9200-906b7206272d"
                    }
                  },
                  "Merchant não possui taxas cadastradas": {
                    "value": {
                      "status": 400,
                      "message": "[400] Merchant has no fees registered. (stackId: 8981263d-ecc6-48c6-b67a-78b55f3dfcbd)",
                      "details": {},
                      "stackId": "8981263d-ecc6-48c6-b67a-78b55f3dfcbd"
                    }
                  },
                  "Saldo e Limite insuficientes": {
                    "value": {
                      "status": 400,
                      "message": "[400] Payment options not available. (stackId: 7ca15c9f-c822-4711-8a75-5acc3e4ca265)",
                      "details": {},
                      "stackId": "7ca15c9f-c822-4711-8a75-5acc3e4ca265"
                    }
                  }
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnauthorizedAuthErrorResponse"
                },
                "examples": {
                  "Ausência do campo X-Merchant-Token obrigatório no header.": {
                    "value": {
                      "status": 401,
                      "message": "[401] Unauthorized appToken header (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
                      "stackId\"": "cb3333-f33d-3c3f-b33e-f3f33333fe3f",
                      "details": {}
                    }
                  },
                  "Ausência do campo X-Merchant-Key obrigatório no header.": {
                    "value": {
                      "status": 401,
                      "message": "[401] Unauthorized appKey header (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
                      "stackId\"": "cb3333-f33d-3c3f-b33e-f3f33333fe3f",
                      "details": {}
                    }
                  },
                  "Ausência do escopo payment_conditions no token do header Authorization.": {
                    "value": {
                      "status": 401,
                      "message": "\"[401] Http request error 401: {\\\"error\\\":\\\"Unauthorized\\\"} (stackId: f874dcac-b026-4105-9b90-bf74953bc59c)\"",
                      "stackId\"": "f874dcac-b026-4105-9b90-bf74953bc59c",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "410": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GoneErrorResponse"
                }
              }
            },
            "description": "Gone"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TooManyRequestsErrorResponse"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "deprecated": true,
        "operationId": "PaymentConditionsGet",
        "summary": "Consultar condições de pagamento com CPF",
        "description": "Este endpoint retorna as opções de pagamentos e de parcelamento disponíveis para uma determinada compra. A resposta do endpoint varia de acordo com o cliente e a compra."
      }
    },
    "/v2/checkouts/payment-conditions": {
      "post": {
        "tags": [
          "Condições de pagamento"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "required": false,
            "in": "header",
            "description": "Recebe o Bearer `access_token`.",
            "example": "Bearer UVhslgtbavMol9u8",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PaymentConditions-2"
              },
              "examples": {
                "Sem paymentMethods (comportamento padrão)": {
                  "value": {
                    "document": "98765432108",
                    "amount": 100
                  }
                },
                "Com um método de pagamento": {
                  "value": {
                    "document": "98765432108",
                    "amount": 100,
                    "paymentMethods": [
                      {
                        "amount": 90,
                        "type": "debit"
                      }
                    ]
                  }
                },
                "Com dois métodos de pagamento": {
                  "value": {
                    "document": "98765432108",
                    "amount": 100,
                    "paymentMethods": [
                      {
                        "amount": 90,
                        "type": "debit"
                      },
                      {
                        "amount": 95,
                        "type": "credit_with_additional_limit"
                      }
                    ]
                  }
                },
                "Com todos os métodos de pagamento": {
                  "value": {
                    "document": "98765432108",
                    "amount": 100,
                    "paymentMethods": [
                      {
                        "amount": 90,
                        "type": "debit"
                      },
                      {
                        "amount": 92.5,
                        "type": "credit"
                      },
                      {
                        "amount": 95,
                        "type": "credit_with_additional_limit"
                      }
                    ]
                  }
                },
                "Lista paymentMethods vazia (comportamento padrão)": {
                  "value": {
                    "document": "98765432108",
                    "amount": 100,
                    "paymentMethods": []
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaymentConditionResponse-2"
                },
                "examples": {
                  "Débito": {
                    "value": [
                      {
                        "type": "debit",
                        "amount": 2000,
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2000
                          }
                        ]
                      }
                    ]
                  },
                  "Crédito": {
                    "value": [
                      {
                        "type": "credit",
                        "amount": 2000,
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2000
                          },
                          {
                            "quantity": 2,
                            "amount": 1000
                          },
                          {
                            "quantity": 3,
                            "amount": 729.52,
                            "amountPercentage": 100,
                            "interest": 0.05,
                            "interestAmount": 34.67,
                            "iof": 16.29,
                            "iofPercentage": 0.008,
                            "totalAmount": 2188.57,
                            "totalAmountPercentage": 1.08,
                            "amountContracted": 2016.29,
                            "amountContractedPercentage": 1,
                            "cet": 0.88
                          }
                        ]
                      }
                    ]
                  },
                  "Débito e Crédito": {
                    "value": [
                      {
                        "type": "debit",
                        "amount": 2000,
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2000
                          }
                        ]
                      },
                      {
                        "type": "credit",
                        "amount": 2000,
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2000
                          },
                          {
                            "quantity": 2,
                            "amount": 1000
                          },
                          {
                            "quantity": 3,
                            "amount": 729.52,
                            "amountPercentage": 100,
                            "interest": 0.05,
                            "interestAmount": 34.67,
                            "iof": 16.29,
                            "iofPercentage": 0.008,
                            "totalAmount": 2188.57,
                            "totalAmountPercentage": 1.08,
                            "amountContracted": 2016.29,
                            "amountContractedPercentage": 1,
                            "cet": 0.88
                          }
                        ]
                      }
                    ]
                  },
                  "Crédito com Limite Adicional": {
                    "value": [
                      {
                        "type": "credit_with_additional_limit",
                        "amount": 2000,
                        "additionalLimitMessage": "Não consome o limite do cartão",
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2257.81,
                            "amountPercentage": 100,
                            "interest": 0.11,
                            "interestAmount": 240.38,
                            "iof": 17.43,
                            "iofPercentage": 0.008,
                            "totalAmount": 2257.81,
                            "totalAmountPercentage": 1.11,
                            "amountContracted": 2017.43,
                            "amountContractedPercentage": 1,
                            "cet": 1.06,
                            "installmentPlanAdditionalLimit": 2257.81
                          },
                          {
                            "quantity": 2,
                            "amount": 1162.23,
                            "amountPercentage": 100,
                            "interest": 0.15,
                            "interestAmount": 304.32,
                            "iof": 20.15,
                            "iofPercentage": 0.008,
                            "totalAmount": 2324.47,
                            "totalAmountPercentage": 1.15,
                            "amountContracted": 2020.15,
                            "amountContractedPercentage": 1,
                            "cet": 1.08,
                            "installmentPlanAdditionalLimit": 2324.47
                          },
                          {
                            "quantity": 3,
                            "amount": 797.53,
                            "amountPercentage": 100,
                            "interest": 0.11,
                            "interestAmount": 369.6,
                            "iof": 22.99,
                            "iofPercentage": 0.008,
                            "totalAmount": 2392.59,
                            "totalAmountPercentage": 1.18,
                            "amountContracted": 2022.99,
                            "amountContractedPercentage": 1,
                            "cet": 1.07,
                            "installmentPlanAdditionalLimit": 2392.59
                          }
                        ]
                      }
                    ]
                  },
                  "Crédito com Limite Adicional Parcial": {
                    "value": [
                      {
                        "type": "credit_with_additional_limit",
                        "amount": 2000,
                        "additionalLimitMessage": "R$ 2392,59 para essa compra",
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2257.81,
                            "amountPercentage": 100,
                            "interest": 0.11,
                            "interestAmount": 240.38,
                            "iof": 17.43,
                            "iofPercentage": 0.008,
                            "totalAmount": 2257.81,
                            "totalAmountPercentage": 1.11,
                            "amountContracted": 2017.43,
                            "amountContractedPercentage": 1,
                            "cet": 1.06,
                            "installmentPlanAdditionalLimit": 2257.81
                          },
                          {
                            "quantity": 2,
                            "amount": 1162.23,
                            "amountPercentage": 100,
                            "interest": 0.15,
                            "interestAmount": 304.32,
                            "iof": 20.15,
                            "iofPercentage": 0.008,
                            "totalAmount": 2324.47,
                            "totalAmountPercentage": 1.15,
                            "amountContracted": 2020.15,
                            "amountContractedPercentage": 1,
                            "cet": 1.08,
                            "installmentPlanAdditionalLimit": 2324.47
                          },
                          {
                            "quantity": 3,
                            "amount": 797.53,
                            "amountPercentage": 100,
                            "interest": 0.11,
                            "interestAmount": 369.6,
                            "iof": 22.99,
                            "iofPercentage": 0.008,
                            "totalAmount": 2392.59,
                            "totalAmountPercentage": 1.18,
                            "amountContracted": 2022.99,
                            "amountContractedPercentage": 1,
                            "cet": 1.07,
                            "installmentPlanAdditionalLimit": 2392.59
                          }
                        ]
                      }
                    ]
                  },
                  "Crédito e Crédito com Limite Adicional": {
                    "value": [
                      {
                        "type": "credit",
                        "amount": 2000,
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2000
                          },
                          {
                            "quantity": 2,
                            "amount": 1000
                          }
                        ]
                      },
                      {
                        "type": "credit_with_additional_limit",
                        "amount": 2000,
                        "additionalLimitMessage": "Não consome o limite do cartão",
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2257.81,
                            "amountPercentage": 100,
                            "interest": 0.11,
                            "interestAmount": 240.38,
                            "iof": 17.43,
                            "iofPercentage": 0.008,
                            "totalAmount": 2257.81,
                            "totalAmountPercentage": 1.11,
                            "amountContracted": 2017.43,
                            "amountContractedPercentage": 1,
                            "cet": 1.06,
                            "installmentPlanAdditionalLimit": 2257.81
                          },
                          {
                            "quantity": 2,
                            "amount": 1162.23,
                            "amountPercentage": 100,
                            "interest": 0.15,
                            "interestAmount": 304.32,
                            "iof": 20.15,
                            "iofPercentage": 0.008,
                            "totalAmount": 2324.47,
                            "totalAmountPercentage": 1.15,
                            "amountContracted": 2020.15,
                            "amountContractedPercentage": 1,
                            "cet": 1.08,
                            "installmentPlanAdditionalLimit": 2324.47
                          },
                          {
                            "quantity": 3,
                            "amount": 797.53,
                            "amountPercentage": 100,
                            "interest": 0.11,
                            "interestAmount": 369.6,
                            "iof": 22.99,
                            "iofPercentage": 0.008,
                            "totalAmount": 2392.59,
                            "totalAmountPercentage": 1.18,
                            "amountContracted": 2022.99,
                            "amountContractedPercentage": 1,
                            "cet": 1.07,
                            "installmentPlanAdditionalLimit": 2392.59
                          }
                        ]
                      }
                    ]
                  },
                  "Débito e Crédito com Limite Adicional": {
                    "value": [
                      {
                        "type": "debit",
                        "amount": 2000,
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2000
                          }
                        ]
                      },
                      {
                        "type": "credit_with_additional_limit",
                        "amount": 2000,
                        "additionalLimitMessage": "Não consome o limite do cartão",
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2257.81,
                            "amountPercentage": 100,
                            "interest": 0.11,
                            "interestAmount": 240.38,
                            "iof": 17.43,
                            "iofPercentage": 0.008,
                            "totalAmount": 2257.81,
                            "totalAmountPercentage": 1.11,
                            "amountContracted": 2017.43,
                            "amountContractedPercentage": 1,
                            "cet": 1.06,
                            "installmentPlanAdditionalLimit": 2257.81
                          },
                          {
                            "quantity": 2,
                            "amount": 1162.23,
                            "amountPercentage": 100,
                            "interest": 0.15,
                            "interestAmount": 304.32,
                            "iof": 20.15,
                            "iofPercentage": 0.008,
                            "totalAmount": 2324.47,
                            "totalAmountPercentage": 1.15,
                            "amountContracted": 2020.15,
                            "amountContractedPercentage": 1,
                            "cet": 1.08,
                            "installmentPlanAdditionalLimit": 2324.47
                          },
                          {
                            "quantity": 3,
                            "amount": 797.53,
                            "amountPercentage": 100,
                            "interest": 0.11,
                            "interestAmount": 369.6,
                            "iof": 22.99,
                            "iofPercentage": 0.008,
                            "totalAmount": 2392.59,
                            "totalAmountPercentage": 1.18,
                            "amountContracted": 2022.99,
                            "amountContractedPercentage": 1,
                            "cet": 1.07,
                            "installmentPlanAdditionalLimit": 2392.59
                          }
                        ]
                      }
                    ]
                  },
                  "Débito, Crédito e Crédito com Limite Adicional": {
                    "value": [
                      {
                        "type": "debit",
                        "amount": 2000,
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2000
                          }
                        ]
                      },
                      {
                        "type": "credit",
                        "amount": 2000,
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2000
                          },
                          {
                            "quantity": 2,
                            "amount": 1000
                          }
                        ]
                      },
                      {
                        "type": "credit_with_additional_limit",
                        "amount": 2000,
                        "additionalLimitMessage": "Não consome o limite do cartão",
                        "installmentPlans": [
                          {
                            "quantity": 1,
                            "amount": 2257.81,
                            "amountPercentage": 100,
                            "interest": 0.11,
                            "interestAmount": 240.38,
                            "iof": 17.43,
                            "iofPercentage": 0.008,
                            "totalAmount": 2257.81,
                            "totalAmountPercentage": 1.11,
                            "amountContracted": 2017.43,
                            "amountContractedPercentage": 1,
                            "cet": 1.06,
                            "installmentPlanAdditionalLimit": 2257.81
                          },
                          {
                            "quantity": 2,
                            "amount": 1162.23,
                            "amountPercentage": 100,
                            "interest": 0.15,
                            "interestAmount": 304.32,
                            "iof": 20.15,
                            "iofPercentage": 0.008,
                            "totalAmount": 2324.47,
                            "totalAmountPercentage": 1.15,
                            "amountContracted": 2020.15,
                            "amountContractedPercentage": 1,
                            "cet": 1.08,
                            "installmentPlanAdditionalLimit": 2324.47
                          },
                          {
                            "quantity": 3,
                            "amount": 797.53,
                            "amountPercentage": 100,
                            "interest": 0.11,
                            "interestAmount": 369.6,
                            "iof": 22.99,
                            "iofPercentage": 0.008,
                            "totalAmount": 2392.59,
                            "totalAmountPercentage": 1.18,
                            "amountContracted": 2022.99,
                            "amountContractedPercentage": 1,
                            "cet": 1.07,
                            "installmentPlanAdditionalLimit": 2392.59
                          }
                        ]
                      }
                    ]
                  }
                }
              }
            },
            "description": "Success"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BadRequestErrorResponse"
                },
                "examples": {
                  "Campos obrigatórios inválidos": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid amount; (stackId: 68b4d6eb-c57e-4076-9200-906b7206272d)",
                      "details": {},
                      "stackId": "68b4d6eb-c57e-4076-9200-906b7206272d"
                    }
                  },
                  "Merchant não possui taxas cadastradas": {
                    "value": {
                      "status": 400,
                      "message": "[400] Merchant has no fees registered. (stackId: 8981263d-ecc6-48c6-b67a-78b55f3dfcbd)",
                      "details": {},
                      "stackId": "8981263d-ecc6-48c6-b67a-78b55f3dfcbd"
                    }
                  },
                  "Saldo e Limite insuficientes": {
                    "value": {
                      "status": 400,
                      "message": "[400] Payment options not available. (stackId: 7ca15c9f-c822-4711-8a75-5acc3e4ca265)",
                      "details": {},
                      "stackId": "7ca15c9f-c822-4711-8a75-5acc3e4ca265"
                    }
                  },
                  "Documento inválido": {
                    "value": {
                      "status": 400,
                      "message": "[400] Http request error 400: {\"error\":{\"customer-tax-id\":\"(not (matches-some-precondition? 38690719821))\"}} (stackId: 9d3d7175-5bad-4430-9c86-1205396fab15)",
                      "details": {
                        "error": {
                          "customer-tax-id": "(not (matches-some-precondition? 99999999999))"
                        }
                      },
                      "stackId": "9d3d7175-5bad-4430-9c86-1205396fab15"
                    }
                  },
                  "Authorization token ou documento inválido": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid authorization is required or document is invalid; (stackId: 3c007696-4002-45cb-b500-a8efb0d1be4f)",
                      "details": {},
                      "stackId": "9d3d7175-5bad-4430-9c86-1205396fab15"
                    }
                  }
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnauthorizedAuthErrorResponse"
                },
                "examples": {
                  "Ausência do campo X-Merchant-Token obrigatório no header.": {
                    "value": {
                      "status": 401,
                      "message": "[401] Unauthorized appToken header (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
                      "stackId": "cb3333-f33d-3c3f-b33e-f3f33333fe3f",
                      "details": {}
                    }
                  },
                  "Ausência do campo X-Merchant-Key obrigatório no header.": {
                    "value": {
                      "status": 401,
                      "message": "[401] Unauthorized appKey header (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
                      "stackId": "cb3333-f33d-3c3f-b33e-f3f33333fe3f",
                      "details": {}
                    }
                  },
                  "Ausência do escopo payment_conditions no token do header Authorization.": {
                    "value": {
                      "status": 401,
                      "message": "\"[401] Http request error 401: {\\\"error\\\":\\\"Unauthorized\\\"} (stackId: f874dcac-b026-4105-9b90-bf74953bc59c)\"",
                      "stackId": "f874dcac-b026-4105-9b90-bf74953bc59c",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "408": {
            "description": "Timeout"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TooManyRequestsErrorResponse"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "deprecated": false,
        "operationId": "PaymentConditionsPost",
        "summary": "Consultar condições de pagamento",
        "description": "Este endpoint retorna as opções de pagamentos e de parcelamento disponíveis para uma determinada compra. A resposta do endpoint varia de acordo com o cliente e a compra.\n> **Importante:** Para consultar as condições de pagamento, verifique se a [autorização](#operation/GenerateAuthorizationUrl) foi feita com o escopo `payment_conditions`.\n\n**Comportamento com paymentMethods:**\n- Se `paymentMethods` não for informado ou for uma lista vazia, será usado o valor de `amount` para todos os métodos de pagamento disponíveis - Se `paymentMethods` for informado com valores específicos, o método será calculado a partir do valor fornecido - Para métodos não especificados em `paymentMethods`, será usado o valor de `amount` como padrão\n\nO header `Authorization` é necessário somente para pagamentos **pré-autorizados** de NuPay.",
        "x-codeSamples": [
          {
            "lang": "cURL",
            "label": "cURL pré-autorizado",
            "source": "curl --request POST \\\n     --url 'https://sandbox-api.spinpay.com.br/v2/checkouts/payment-conditions' \\\n     --header 'Authorization: Bearer {access_token}' \\\n     --header 'X-Merchant-Key: {X-Merchant-Key}' \\\n     --header 'X-Merchant-Token: {X-Merchant-Token}' \\\n     --header 'Content-Type: application/json' \\\n     --data '{\n       \"amount\": 2000.00\n     }'\n"
          },
          {
            "lang": "cURL",
            "label": "cURL com documento",
            "source": "curl --request POST \\\n     --url 'https://sandbox-api.spinpay.com.br/v2/checkouts/payment-conditions' \\\n     --header 'X-Merchant-Key: {X-Merchant-Key}' \\\n     --header 'X-Merchant-Token: {X-Merchant-Token}' \\\n     --header 'Content-Type: application/json' \\\n     --data '{\n       \"amount\": 2000.00,\n       \"document\": \"{customerCPF}\"\n     }'\n"
          },
          {
            "lang": "cURL",
            "label": "cURL com valores específicos por método",
            "source": "curl --request POST \\\n     --url 'https://sandbox-api.spinpay.com.br/v2/checkouts/payment-conditions' \\\n     --header 'X-Merchant-Key: {X-Merchant-Key}' \\\n     --header 'X-Merchant-Token: {X-Merchant-Token}' \\\n     --header 'Content-Type: application/json' \\\n     --data '{\n       \"amount\": 100.0,\n       \"document\": \"{customerCPF}\",\n       \"paymentMethods\": [\n         {\n           \"amount\": 90.0,\n           \"type\": \"debit\"\n         },\n         {\n           \"amount\": 95.0,\n           \"type\": \"credit_with_additional_limit\"\n         }\n       ]\n     }'\n"
          }
        ]
      }
    },
    "/v1/recipients": {
      "post": {
        "operationId": "RecipientPost",
        "summary": "Criar beneficiário final",
        "description": "Endpoint utilizado para cadastrar os dados do Beneficiário Final Recebedor. O cadastro é realizado via API e retorna o `referenceId` do beneficiário criado. Este `referenceId` pode ser utilizado posteriormente no campo `recipients` ao criar um pagamento via `/v1/checkouts/payments`. Caso o merchant envie dados de um beneficiário que já está cadastrado (mesmo `referenceId`), um novo registro será criado e a versão anterior será marcada como deletada (soft delete).\n",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RecipientRequest"
              }
            },
            "examples": {
              "Beneficiário final válido": {
                "$ref": "../components/examples/ValidRecipientCreationExample.yaml"
              }
            }
          },
          "required": true
        },
        "tags": [
          "Beneficiário final"
        ],
        "security": [
          {
            "MerchantApiKey": [],
            "MerchantApiToken": []
          }
        ],
        "x-codeSamples": [
          {
            "lang": "cURL",
            "label": "cURL",
            "source": "curl --request POST \\\n     --url 'https://sandbox-api.spinpay.com.br/v1/recipients' \\\n     --header 'X-Merchant-Key: {X-Merchant-Key}' \\\n     --header 'X-Merchant-Token: {X-Merchant-Token}' \\\n     --header 'Content-Type: application/json' \\\n     --data '{\n       \"referenceId\": \"a1784b59-f848-49f2-ae3c-d5d1f8a472cb\",\n       \"country\": \"BR\",\n       \"name\": \"Empresa Exemplo Ltda\",\n       \"document\": \"12345678000195\",\n       \"documentType\": \"CNPJ\"\n     }'\n"
          }
        ],
        "responses": {
          "200": {
            "description": "Beneficiário final criado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecipientResponse"
                },
                "examples": {
                  "Beneficiário final criado": {
                    "$ref": "#/components/examples/ValidRecipientResponseExample"
                  }
                }
              }
            }
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BadRequestErrorResponse"
                },
                "examples": {
                  "Campo referenceId é obrigatório": {
                    "value": {
                      "status": 400,
                      "message": "[400] Undefined Beneficiary referenceId;",
                      "details": {}
                    }
                  },
                  "Campo referenceId inválido": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid Beneficiary referenceId;",
                      "details": {}
                    }
                  },
                  "Campo country é obrigatório": {
                    "value": {
                      "status": 400,
                      "message": "[400] Undefined Beneficiary country;",
                      "details": {}
                    }
                  },
                  "Campo country inválido": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid Beneficiary country;",
                      "details": {}
                    }
                  },
                  "Campo name é obrigatório": {
                    "value": {
                      "status": 400,
                      "message": "[400] Undefined Beneficiary name;",
                      "details": {}
                    }
                  },
                  "Campo name inválido": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid Beneficiary name;",
                      "details": {}
                    }
                  },
                  "Campo document é obrigatório": {
                    "value": {
                      "status": 400,
                      "message": "[400] Undefined Beneficiary document;",
                      "details": {}
                    }
                  },
                  "Campo document inválido": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid Beneficiary document;",
                      "details": {}
                    }
                  },
                  "Campo documentType é obrigatório": {
                    "value": {
                      "status": 400,
                      "message": "[400] Undefined Beneficiary documentType;",
                      "details": {}
                    }
                  },
                  "Campo documentType inválido": {
                    "value": {
                      "status": 400,
                      "message": "[400] Invalid Beneficiary documentType;",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnauthorizedAuthErrorResponse"
                },
                "examples": {
                  "Ausência do campo X-Merchant-Token obrigatório no header": {
                    "value": {
                      "status": 401,
                      "message": "[401] Unauthorized appToken header;",
                      "details": {}
                    }
                  },
                  "Ausência do campo X-Merchant-Key obrigatório no header": {
                    "value": {
                      "status": 401,
                      "message": "[401] Unauthorized appKey header;",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          }
        }
      }
    },
    "/v1/recipients/{referenceId}": {
      "get": {
        "operationId": "RecipientGetByReferenceId",
        "summary": "Consultar beneficiário final",
        "description": "Endpoint utilizado para consultar os dados do Beneficiário Final Recebedor pelo `referenceId` informado pelo merchant. Retorna a versão ativa do beneficiário  na raiz do JSON e o histórico de versões anteriores no campo `history`.\n",
        "parameters": [
          {
            "name": "referenceId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID de referência externo do recipient informado pelo merchant",
            "example": "8943dd2c-e743-46a5-b953-45f806022210"
          }
        ],
        "tags": [
          "Beneficiário final"
        ],
        "security": [
          {
            "MerchantApiKey": [],
            "MerchantApiToken": []
          }
        ],
        "x-codeSamples": [
          {
            "lang": "cURL",
            "label": "cURL",
            "source": "curl --request GET \\\n     --url 'https://sandbox-api.spinpay.com.br/v1/recipients/{referenceId}' \\\n     --header 'X-Merchant-Key: {X-Merchant-Key}' \\\n     --header 'X-Merchant-Token: {X-Merchant-Token}'\n"
          }
        ],
        "responses": {
          "200": {
            "description": "Beneficiário final encontrado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecipientGetResponse"
                },
                "examples": {
                  "Beneficiário sem histórico": {
                    "$ref": "#/components/examples/ValidRecipientGetResponseNoHistoryExample"
                  },
                  "Beneficiário com histórico": {
                    "$ref": "#/components/examples/ValidRecipientGetResponseWithHistoryExample"
                  }
                }
              }
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnauthorizedAuthErrorResponse"
                },
                "examples": {
                  "Ausência do campo X-Merchant-Token obrigatório no header": {
                    "value": {
                      "status": 401,
                      "message": "[401] Unauthorized appToken header;",
                      "details": {}
                    }
                  },
                  "Ausência do campo X-Merchant-Key obrigatório no header": {
                    "value": {
                      "status": 401,
                      "message": "[401] Unauthorized appKey header;",
                      "details": {}
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "description": "Beneficiário final não encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecipientNotFoundErrorResponse"
                },
                "examples": {
                  "Beneficiário não encontrado": {
                    "value": {
                      "error": "RECIPIENT_NOT_FOUND",
                      "message": "Recipient with referenceId 'xyz' not found."
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "MerchantApiKey": {
        "type": "apiKey",
        "description": "API Key <a href=\"https://docs.nupaybusiness.com.br/#/checkout/?id=credenciais\" target=\"_blank\">(seção Credenciais).</a>",
        "name": "X-Merchant-Key",
        "in": "header"
      },
      "MerchantApiToken": {
        "type": "apiKey",
        "description": "API Token <a href=\"https://docs.nupaybusiness.com.br/#/checkout/?id=credenciais\" target=\"_blank\">(seção Credenciais).</a>",
        "name": "X-Merchant-Token",
        "in": "header"
      }
    },
    "schemas": {
      "PaymentFlow": {
        "title": "PaymentMethod",
        "description": "Determina o fluxo para o qual os consumidores serão redirecionados após autorização (returnUrl) ou cancelamento (cancelUrl) do pagamento.",
        "type": "object",
        "properties": {
          "returnUrl": {
            "description": "URL para a qual o consumidor será redirecionado após finalizar o pagamento.\nUsado no fluxo de NuPay e redirecionamento.\nProtocolo é obrigatório e deve ser sempre `HTTPS`.",
            "type": "string"
          },
          "cancelUrl": {
            "description": "URL para onde o cliente será direcionado caso o cliente escolha não finalizar o pagamento, e assim cancelar o pedido no e-commerce. Usado no fluxo de NuPay e redirecionamento. Caso não seja fornecido, a URL para redirecionamento em caso de cancelamento será o campo _returnUrl_. Protocolo é obrigatório e deve ser sempre `HTTPS`.",
            "type": "string"
          }
        },
        "example": {
          "type": "redirect",
          "redirect": "https://mysite.com/finish-page"
        }
      },
      "Details": {
        "title": "Details",
        "type": "object",
        "properties": {
          "taxValue": {
            "format": "double",
            "description": "Montante do total de taxas aplicadas.\t",
            "type": "number"
          }
        }
      },
      "Amount": {
        "title": "Amount",
        "required": [
          "currency",
          "value"
        ],
        "optional": [
          "details"
        ],
        "type": "object",
        "properties": {
          "value": {
            "format": "double",
            "description": "O montante a ser pago.\t",
            "type": "number"
          },
          "currency": {
            "description": "Moeda do pagamento em formato ISO.\t",
            "type": "string"
          },
          "details": {
            "$ref": "#/components/schemas/Details",
            "description": "Detalhes que constituem o montante a ser pago.\t"
          }
        }
      },
      "Phone": {
        "title": "Phone",
        "required": [
          "country",
          "number"
        ],
        "type": "object",
        "properties": {
          "country": {
            "description": "Código internacional do país.",
            "type": "string"
          },
          "number": {
            "description": "Número do telefone com código de área.",
            "type": "string"
          }
        }
      },
      "Shopper": {
        "title": "Shopper",
        "required": [
          "firstName",
          "lastName",
          "document",
          "documentType",
          "email"
        ],
        "optional": [
          "phone"
        ],
        "type": "object",
        "properties": {
          "reference": {
            "description": "Referência que identifica unicamente um consumidor. User Id ou Account Id.\t",
            "type": "string"
          },
          "firstName": {
            "description": "Primeiro nome do consumidor.",
            "type": "string"
          },
          "lastName": {
            "description": "Sobrenome do consumidor.",
            "type": "string"
          },
          "document": {
            "description": "Número do documento do consumidor de acordo com o tipo do documento especificado pelo campo \"documentType\".",
            "type": "string"
          },
          "documentType": {
            "description": "Tipo do documento do consumidor.",
            "type": "string",
            "enum": [
              "CPF"
            ]
          },
          "email": {
            "description": "Email do consumidor.",
            "type": "string"
          },
          "phone": {
            "$ref": "#/components/schemas/Phone",
            "description": "Telefone do consumidor completo, com código de país, código de área e número."
          },
          "ip": {
            "description": "IP de onde o consumidor está realizando a compra.",
            "type": "string"
          },
          "locale": {
            "description": "Língua do consumidor.",
            "type": "string"
          }
        }
      },
      "Address": {
        "title": "Address",
        "required": [
          "street",
          "number",
          "postalCode",
          "city",
          "state",
          "country"
        ],
        "type": "object",
        "properties": {
          "country": {
            "description": "País",
            "type": "string"
          },
          "street": {
            "description": "Logradouro.",
            "type": "string"
          },
          "number": {
            "description": "Número",
            "type": "string"
          },
          "complement": {
            "description": "Complemento. Casa, apartamento, bloco, ponto de referência.",
            "type": "string"
          },
          "neighborhood": {
            "description": "Bairro",
            "type": "string"
          },
          "postalCode": {
            "description": "CEP",
            "type": "string"
          },
          "city": {
            "description": "Cidade",
            "type": "string"
          },
          "state": {
            "description": "Estado",
            "type": "string"
          }
        }
      },
      "Shipping": {
        "title": "Shipping",
        "type": "object",
        "properties": {
          "value": {
            "format": "double",
            "description": "Valor do frete.",
            "type": "number"
          },
          "company": {
            "description": "Companhia responsável pela entrega.",
            "type": "string"
          },
          "address": {
            "$ref": "#/components/schemas/Address",
            "description": "Endereço de entrega"
          }
        }
      },
      "Item": {
        "title": "Items",
        "required": [
          "id",
          "value",
          "quantity",
          "description"
        ],
        "type": "object",
        "properties": {
          "id": {
            "description": "ID do item.",
            "type": "string"
          },
          "description": {
            "description": "Descrição do item.",
            "type": "string"
          },
          "value": {
            "format": "double",
            "description": "Preço do item.",
            "type": "number"
          },
          "quantity": {
            "format": "int32",
            "description": "Quantidade",
            "type": "integer"
          },
          "discount": {
            "format": "int32",
            "description": "Desconto dado ao item pelo vendedor.",
            "type": "integer"
          },
          "taxAmount": {
            "format": "double",
            "description": "Valor total de impostos do item.\t",
            "type": "number"
          },
          "amountExcludingTax": {
            "format": "double",
            "description": "Valor do item excluindo impostos.\t",
            "type": "number"
          },
          "amountIncludingTax": {
            "format": "double",
            "description": "Valor do item incluindo impostos.\t",
            "type": "number"
          }
        }
      },
      "Recipient": {
        "title": "Recipient",
        "type": "object",
        "properties": {
          "referenceId": {
            "description": "Identificador do beneficiário final previamente cadastrado via POST /v1/recipients. Aceita letras, números, ponto (.), hífen (-) e underscore (_).",
            "type": "string",
            "maxLength": 100,
            "pattern": "^[a-zA-Z0-9._-]{1,50}$",
            "example": "8943dd2c-e743-46a5-b953-45f806022210"
          },
          "amount": {
            "type": "object",
            "description": "Objeto contendo o montante e a moeda do pagamento ao beneficiário.",
            "properties": {
              "value": {
                "type": "number",
                "format": "double",
                "description": "O valor monetário a ser pago ao beneficiário.",
                "example": 150.75
              },
              "currency": {
                "type": "string",
                "description": "Moeda do pagamento em formato ISO.",
                "example": "BRL"
              }
            }
          }
        }
      },
      "NuPayCheckoutCreationRequest": {
        "title": "NuPayCheckoutRequest",
        "required": [
          "merchantOrderReference",
          "referenceId",
          "amount",
          "shopper",
          "items",
          "paymentMethod"
        ],
        "type": "object",
        "properties": {
          "merchantOrderReference": {
            "description": "Número da ordem de compra criada pela loja. Esse número é o que identifica essa compra nos arquivos de conciliação e deve ser único por loja.",
            "type": "string"
          },
          "transactionId": {
            "description": "Identificação da transação relacionada a esse pagamento.\t",
            "type": "string"
          },
          "referenceId": {
            "description": "Referência que identifica um pagamento de forma única para o e-commerce. É recomendado que esse valor seja único por pagamento.\t",
            "type": "string"
          },
          "paymentMethod": {
            "required": [
              "type"
            ],
            "title": "PaymentMethod",
            "description": "Forma de pagamento a ser utilizada.\n",
            "type": "object",
            "properties": {
              "type": {
                "description": "Código da forma de pagamento.",
                "enum": [
                  "nupay"
                ]
              },
              "fundingSource": {
                "enum": [
                  "credit",
                  "debit",
                  "credit_with_additional_limit"
                ],
                "description": "Origem dos fundos.\n\nObrigatório apenas se **type** for **nupay** e **authorizationType** for **pre_authorized**.\n"
              },
              "authorizationType": {
                "enum": [
                  "manually_authorized",
                  "pre_authorized"
                ],
                "description": "Tipo de autorização de pagamento.\n\n- **manually_authorized** é o fluxo onde o usuário precisa autorizar a cobrança todas as vezes.\n- **pre_authorized** é o fluxo onde o usuário fez a autorização previamente pelo fluxo de pagamentos pré-autorizados.\n\nObrigatório apenas para **type** **nupay**.\n",
                "type": "string;"
              }
            }
          },
          "installments": {
            "description": "Quantidade de parcelas. Somente para pagamentos pré-autorizado.",
            "type": "integer"
          },
          "paymentFlow": {
            "$ref": "#/components/schemas/PaymentFlow"
          },
          "merchantName": {
            "description": "Nome da marca que deve ser mostrado ao consumidor.\tSe omitido, o nome cadastrado pelo e-commerce será utilizado.",
            "type": "string"
          },
          "storeName": {
            "description": "Nome da filial/loja.",
            "type": "string"
          },
          "amount": {
            "$ref": "#/components/schemas/Amount",
            "description": "Objeto contendo o valor, a moeda e detalhes da transação.\t"
          },
          "delayToAutoCancel": {
            "format": "int32",
            "description": "Tempo de espera em minutos para o consumidor aprovar o pagamento. Vencido esse tempo, uma chamada para cancelamento do pagamento é feita automaticamente. Valor padrão é de 30 minutos. Não pode ser menor que 1.\t",
            "default": 30,
            "type": "integer"
          },
          "shopper": {
            "$ref": "#/components/schemas/Shopper",
            "description": "Objeto contendo os dados do comprador."
          },
          "shipping": {
            "$ref": "#/components/schemas/Shipping",
            "description": "Objeto contendo informações relativas ao frete."
          },
          "billingAddress": {
            "$ref": "#/components/schemas/Address",
            "description": "Objeto contendo informações do endereço de faturamento."
          },
          "items": {
            "description": "Itens comprados.\t",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Item"
            }
          },
          "recipients": {
            "description": "Array de beneficiários finais. Representa os destinatários efetivos dos valores transacionados, conforme exigência regulatória do Banco Central (Circular BCB 3.978/2020) para identificação de beneficiários finais em arranjos de pagamento. Máximo de 10 itens. Campo opcional e não bloqueante na criação de pagamento.",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Recipient"
            }
          },
          "orderUrl": {
            "description": "URL da ordem de compra da loja. Protocolo é obrigatório (https://).\t",
            "type": "string"
          },
          "callbackUrl": {
            "description": "URL para enviar notificação da plataforma NuPay for Business para a plataforma do e-commerce. Para mais informações sobre as notificações, veja a seção [Notificações](#tag/Notificacoes). Protocolo é obrigatório (https://).",
            "type": "string"
          },
          "referenceDate": {
            "description": "Data de referência sem fuso-horário enviada na criação do pedido.",
            "type": "string",
            "format": "ISO-8601 YYYY-MM-DD HH:mm:ss"
          }
        }
      },
      "CheckoutCreationStatus": {
        "description": "Status de um pedido de pagamento.\n\nStatus|Descrição\n-|-\n**WAITING_PAYMENT_METHOD**|O pedido foi criado e está aguardando o método de pagamento.w\n**COMPLETED**|O cliente conclui a compra e o pagamento foi realizado.\n**CANCELLED**|O pagamento foi cancelado.\n**ERROR**|Informa quando um erro ocorreu, juntamente com sua causa.\n",
        "enum": [
          "WAITING_PAYMENT_METHOD",
          "COMPLETED",
          "CANCELLED",
          "ERROR"
        ],
        "type": "string"
      },
      "CheckoutCreationCode": {
        "description": "Complementa status de erro com o código do erro de acordo com tabela abaixo:\n\nstatus|code|message\n-|-|-\n**ERROR**|SYSTEM_ERROR|The system can not process this payment now. Please try again later.\n**CANCELLED**|CANCELLED_BY_USER|The user cancelled the payment.\n**CANCELLED**|CANCELLED_BY_TIMEOUT|This payment was cancelled due to timeout.\n**CANCELLED**|CANCELLED_BY_INSTITUTION|The institution cancelled the payment.\n**CANCELLED**|CANCELLED_BY_SELLER|Seller has cancelled this payment.\n",
        "enum": [
          "SYSTEM_ERROR",
          "CANCELLED_BY_USER",
          "CANCELLED_BY_TIMEOUT",
          "CANCELLED_BY_INSTITUTION",
          "CANCELLED_BY_SELLER"
        ],
        "type": "string"
      },
      "CheckoutCreationMessage": {
        "description": "Complementa status de erro com a mensagem do erro de acordo com tabela abaixo:\n\nstatus|code|message\n-|-|-\n**ERROR**|SYSTEM_ERROR|The system can not process this payment now. Please try again later.\n**CANCELLED**|CANCELLED_BY_USER|The user cancelled the payment.\n**CANCELLED**|CANCELLED_BY_TIMEOUT|This payment was cancelled due to timeout.\n**CANCELLED**|CANCELLED_BY_INSTITUTION|The institution cancelled the payment.\n**CANCELLED**|CANCELLED_BY_SELLER|Seller has cancelled this payment.\n",
        "type": "string"
      },
      "NuPayCheckoutCreationResponse": {
        "title": "NuPayCheckoutResponse",
        "required": [
          "pspReferenceId",
          "referenceId",
          "status",
          "paymentUrl"
        ],
        "type": "object",
        "properties": {
          "paymentMethodType": {
            "description": "Tipo do pagamento escolhido pelo consumidor.",
            "type": "string",
            "enum": [
              "nupay"
            ]
          },
          "paymentUrl": {
            "description": "Retorna a URL para o app do Nubank para redirecionar o cliente para concluir o pagamento."
          },
          "referenceId": {
            "description": "O mesmo *referenceId* enviado na solicitação.\n",
            "type": "string"
          },
          "pspReferenceId": {
            "description": "Identifica um único pagamento. É utilizado para toda comunicação sobre o status de pagamento.\n",
            "type": "string"
          },
          "status": {
            "$ref": "#/components/schemas/CheckoutCreationStatus",
            "description": "Status do pedido de pagamento."
          },
          "code": {
            "$ref": "#/components/schemas/CheckoutCreationCode",
            "description": "Código que complementa o status."
          },
          "message": {
            "$ref": "#/components/schemas/CheckoutCreationMessage",
            "description": "Mensagem amigável que descreve o código."
          }
        }
      },
      "BadRequestErrorResponse": {
        "title": "Bad Request Error responses",
        "description": "Schema da resposta quando erro for 400 Bad Request",
        "type": "object",
        "properties": {
          "status": {
            "description": "Código de erro.",
            "type": "string"
          },
          "message": {
            "description": "Mensagem de erro.",
            "type": "string"
          },
          "details": {
            "description": "Detalhes do erro.",
            "type": "object"
          },
          "stackId": {
            "description": "Id da stack do erro.",
            "type": "string"
          }
        },
        "example": {
          "status": 400,
          "message": "[400] Request schema validation failed. (stackId: 50a80d6c-072e-4332-99ec-6567e0edac1d)",
          "details": {
            "validationErrors": [
              {
                "code": "type",
                "path": ".amount.value",
                "message": "should be number",
                "params": {
                  "type": "number"
                }
              }
            ]
          }
        }
      },
      "UnauthorizedAuthErrorResponse": {
        "required": [
          "status",
          "message",
          "stackId"
        ],
        "title": "Unauthorized Error responses",
        "description": "Schema da resposta quando erro for 401 Unauthorized",
        "type": "object",
        "properties": {
          "status": {
            "description": "Código de erro.",
            "type": "string"
          },
          "message": {
            "description": "Mensagem de erro.",
            "type": "string"
          },
          "details": {
            "description": "Detalhes do erro.",
            "type": "string"
          },
          "stackId": {
            "description": "Id da stack do erro.",
            "type": "string"
          }
        },
        "example": {
          "status": "401",
          "message": "[401] Unauthorized appToken header (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
          "details": {}
        }
      },
      "TooManyRequestsErrorResponse": {
        "required": [
          "status",
          "message"
        ],
        "title": "Too Many Requests",
        "description": "Schema da resposta quando erro for 429 Too Many Requests",
        "type": "object",
        "properties": {
          "status": {
            "description": "Código de erro.",
            "type": "string"
          },
          "message": {
            "description": "Mensagem de erro.",
            "type": "string"
          }
        },
        "example": {
          "status": "429",
          "message": "You are exceeding the rate limit for this API, try again later."
        }
      },
      "CheckoutStatus": {
        "description": "Status de um pedido de pagamento.\n\nStatus|Descrição\n-|-\n**WAITING_PAYMENT_METHOD**|O pagamento foi criado e que está aguardando o método de pagamento.\n**AUTHORIZED**|O pagamento foi realizado e o pagamento está em processamento.\n**COMPLETED**|O cliente conclui a compra e o pagamento foi processado.\n**CANCELLED**|O pagamento foi cancelado.\n**ERROR**|Informa quando um erro ocorreu, juntamente com sua causa.\n",
        "enum": [
          "WAITING_PAYMENT_METHOD",
          "AUTHORIZED",
          "CANCELLED",
          "ERROR",
          "COMPLETED"
        ],
        "type": "string"
      },
      "CheckoutStatusCode": {
        "description": "Complementa status de erro com o código do erro de acordo com tabela abaixo:\n\nstatus|code|message\n-|-|-\n**CANCELLED**|CANCELLED_BY_SELLER|O e-commerce cancelou este pagamento.\n**CANCELLED**|CANCELLED_BY_TIMEOUT|Este pagamento foi cancelado por exceder o tempo para processamento.\n**CANCELLED**|CANCELLED_BY_INSTITUTION|A instituição de pagamento cancelou este pagamento.\n**CANCELLED**|CANCELLED_BY_USER|O cliente cancelou este pagamento.\n**CANCELLED ou ERROR**|REVERSED|O processamento do pagamento não foi concluído e o valor foi devolvido para o cliente.\n**ERROR**|SYSTEM_ERROR|O sistema não pode processar este pafamento agora. Tente novamente mais tarde.\n\n",
        "enum": [
          "CANCELLED_BY_SELLER",
          "CANCELLED_BY_TIMEOUT",
          "CANCELLED_BY_INSTITUTION",
          "CANCELLED_BY_USER",
          "REVERSED",
          "SYSTEM_ERROR"
        ],
        "type": "string"
      },
      "CheckoutStatusMessage": {
        "description": "Complementa status de erro com a mensagem do erro de acordo com tabela abaixo:\n\nstatus|code|message\n-|-|-\n**CANCELLED**|CANCELLED_BY_SELLER|Seller has cancelled this payment.\n**CANCELLED**|CANCELLED_BY_TIMEOUT|This payment was cancelled due to timeout.\n**CANCELLED**|CANCELLED_BY_INSTITUTION|The institution cancelled the payment.\n**CANCELLED**|CANCELLED_BY_USER|User has cancelled this payment.\n**CANCELLED ou ERROR**|REVERSED|This payment was reversed due to an internal error.\n**ERROR**|SYSTEM_ERROR|The system can not process this payment now. Please try again later.\n\n",
        "type": "string"
      },
      "RefundStatus": {
        "description": "Status de um pedido de estorno.\n\nStatus|Descrição\n-|-\n**REFUNDING**|O pedido de estorno está sendo processado.\n**REFUNDED**|O pedido de estorno foi processado e realizado.\n**ERROR**|Informa quando um erro ocorreu, juntamente com sua causa.\n",
        "enum": [
          "REFUNDING",
          "REFUNDED",
          "ERROR"
        ],
        "type": "string"
      },
      "RefundAmount": {
        "title": "RefundAmount",
        "required": [
          "currency",
          "value"
        ],
        "type": "object",
        "properties": {
          "value": {
            "format": "double",
            "description": "O montante a ser reembolsado.",
            "type": "number"
          },
          "currency": {
            "description": "Moeda em formato ISO.",
            "default": "BRL",
            "type": "string"
          }
        }
      },
      "RefundError": {
        "required": [
          "type",
          "message"
        ],
        "type": "object",
        "description": "Objeto contendo informações do erro ocorrido durante a execução do estorno.\n",
        "properties": {
          "type": {
            "type": "string",
            "description": "Tipo do erro.\n\nTipo                   | Descrição\n---------------------- | -----------------------------------------------------------\n**UNKNOWN**            | Erro desconhecido durante a execução do estorno, tente novamente.\n**SYSTEM**             | Erro interno do sistema durante a execução do estorno. Pode ser feita nova tentativa de criação de estorno.\n**PAYMENT_METHOD**     | Erro na transação durante a execução do estorno.\n**OPERATION**          | Falha de inconsistência de informações. Revise se o valor e o período do pagamento estão corretos.\n**INSUFFICIENT_FUNDS** | Saldo insuficiente para realizar a devolução. Tente novamente mais tarde depois de novas transações serem aprovadas.\n**FULLY_REFUNDED**     | O valor do compra ja foi integralmente devolvido anteriormente.\n**MAX_NUMBER_REACHED** | Já foi solicitada a quantidade máxima de estornos por pedido.\n"
          },
          "code": {
            "type": "string",
            "description": "Código do erro enviado pelo Banco Central. Retornado somente quando o `type` é **PAYMENT_METHOD** e somente para estornos de pagamentos Pix.\n\nCódigo | Descrição\n------ | -----------------------------------------------------------\nAB03   | Timeout no SPI - erro de timing\nAB09   | Transação interrompida devido a erro no PSP Recebedor\nAC03   | Número da conta transacional inexistente ou inválido no PSP Recebedor\nAC06   | A conta transacional especificada encontra-se bloqueada\nAC07   | Número da conta transacional encerrada no PSP Recebedor\nAC14   | Tipo incorreto para conta transacional especificada\nAG03   | Tipo de transação não é suportado/autorizado na conta transacional especificada\nAM02   | Ordem de pagamento/devolução em valor que faz superar o limite permitido para o tipo de conta transacional creditada\nAM09   | Devolução em valor que faz superar o valor da ordem de pagamento correspondente - valor incorreto\nBE01   | CPF/CNPJ do usuário recebedor não é consistente com o titular da conta transacional especificada\nCH11   | CPF/CNPJ do usuário recebedor incorreto\nCH16   | Elemento da mensagem incorreto\nDS04   | Ordem rejeitada pelo PSP Recebedor\nED05   | Erro no processamento do pagamento\n"
          },
          "message": {
            "type": "string",
            "description": "Descrição do erro"
          }
        }
      },
      "RefundStatusItem": {
        "title": "StatusResponse",
        "required": [
          "refundId",
          "status",
          "dueDate",
          "transactionRefundId",
          "amount"
        ],
        "type": "object",
        "properties": {
          "refundId": {
            "description": "Identifica um único estorno.\n",
            "type": "string"
          },
          "status": {
            "$ref": "#/components/schemas/RefundStatus",
            "description": "Status do estorno do pagamento."
          },
          "dueDate": {
            "format": "date-time",
            "description": "Data limite para a composição do estorno.",
            "type": "string"
          },
          "transactionRefundId": {
            "description": "Identificação da transação relacionada a esse estorno. Deve ser única por estorno.\n\nObservação: Quando for enviado `CREATED_BY_SELLER_PANEL`, significa que o estorno\nfoi criado pelo [painel do lojista](https://painel.nupaybusiness.com.br) e, portanto,\nnão possui o identificador único do e-commerce salvo na NuPay for Business.\n",
            "type": "string",
            "example": "234982-abcde-1235"
          },
          "amount": {
            "$ref": "#/components/schemas/RefundAmount",
            "description": "Valor do estorno."
          },
          "error": {
            "$ref": "#/components/schemas/RefundError",
            "description": "Erro durante a criação ou execução de um estorno."
          }
        }
      },
      "CheckoutStatusResponse": {
        "title": "CheckoutResponse",
        "required": [
          "pspReferenceId",
          "referenceId",
          "status",
          "amount",
          "timestamp",
          "payer"
        ],
        "type": "object",
        "properties": {
          "referenceId": {
            "description": "O mesmo *referenceId* enviado na solicitação.\n",
            "type": "string"
          },
          "pspReferenceId": {
            "description": "Identifica um único pagamento. É utilizado para toda comunicação sobre o status de pagamento.\n",
            "type": "string"
          },
          "status": {
            "$ref": "#/components/schemas/CheckoutStatus",
            "description": "Status do pedido de pagamento."
          },
          "code": {
            "$ref": "#/components/schemas/CheckoutStatusCode",
            "description": "Código que complementa o status."
          },
          "message": {
            "$ref": "#/components/schemas/CheckoutStatusMessage",
            "description": "Mensagem amigável que descreve o código."
          },
          "paymentMethodType": {
            "description": "Tipo do meio de pagamento escolhido pelo consumidor.",
            "type": "string"
          },
          "refunds": {
            "description": "Lista de estornos solicitados para este pagamento.",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RefundStatusItem"
            }
          },
          "amount": {
            "description": "Valor do pagamento.",
            "required": [
              "currency",
              "value"
            ],
            "type": "object",
            "properties": {
              "value": {
                "format": "double",
                "description": "O montante a ser pago.\t",
                "type": "number"
              },
              "currency": {
                "description": "Moeda do pagamento em formato ISO.\t",
                "type": "string"
              }
            }
          },
          "timestamp": {
            "description": "Momento exato (ISO String) da ultima mudança de estado.",
            "type": "string",
            "example": "2020-01-01T14:22:18.572Z"
          },
          "paymentType": {
            "description": "Tipo do pagamento via NuPay.\n\n Tipo        | Descrição\n------------ | ------------------------------------\n**credit**   | Pagamento usando crédito.\n**debit**    | Pagamento usando o saldo da conta.\n",
            "type": "string",
            "example": "credit"
          },
          "installmentNumber": {
            "description": "Número de parcelas. Para pagamentos parcelados com juros, deve ser usado para fins de conciliação e é retornado 1\n",
            "type": "number",
            "example": 12
          },
          "installmentNumberPurchase": {
            "description": "Número de parcelas selecionadas para a compra quando for parcelamento com juros.\n",
            "type": "number",
            "example": 12
          },
          "payer": {
            "description": "Identificação do pagador.",
            "required": [
              "id"
            ],
            "type": "object",
            "properties": {
              "id": {
                "description": "Id do pagador",
                "type": "string"
              }
            }
          }
        }
      },
      "NotFoundErrorResponse": {
        "title": "Not Found Error responses",
        "description": "Schema da resposta quando erro for 404 Not Found",
        "type": "object",
        "properties": {
          "status": {
            "description": "Código de erro.",
            "type": "string"
          },
          "message": {
            "description": "Mensagem de erro.",
            "type": "string"
          },
          "details": {
            "description": "Detalhes do erro.",
            "type": "string"
          }
        },
        "example": {
          "status": "404",
          "message": "[404] Not found Merchant",
          "details": {}
        }
      },
      "CheckoutCancelStatus": {
        "description": "Status de um pedido de pagamento.\n\nStatus|Descrição\n-|-\n**CANCELLING**|A requisição de cancelamento é válida e será processada. Ao término do processamento o estado do pagamento será CANCELLED.\n**CANCELLED**|O pagamento foi cancelado.\n**DENIED**|O pedido de pagamento foi recusado.\n**ERROR**|Informa quando um erro ocorreu, juntamente com sua  razão.\n",
        "enum": [
          "CANCELLING",
          "CANCELLED",
          "DENIED",
          "ERROR"
        ],
        "type": "string"
      },
      "CheckoutCancelCode": {
        "description": "Complementa status de erro com o código do erro de acordo com tabela abaixo:\n\nstatus|code|message\n-|-|-\n**DENIED**|ALREADY_CANCELLED|This payment was already cancelled.\n**DENIED**|CANCELLED_BY_USER|This payment was already cancelled by user.\n**DENIED**|CANCELLED_BY_SELLER|This payment was already cancelled by seller.\n**DENIED**|ALREADY_DENIED|This payment was denied by user or institution and cannot be refunded.\n**DENIED**|ALREADY_SETTLED|This payment was already settled. Use refund endpoint instead.\n**DENIED**|ALREADY_REFUNDED|This payment was already refunded.\n**ERROR**|SYSTEM_ERROR|The system can not process this payment now. Please try again later.\n",
        "enum": [
          "ALREADY_CANCELLED",
          "CANCELLED_BY_USER",
          "CANCELLED_BY_SELLER",
          "ALREADY_DENIED",
          "ALREADY_SETTLED",
          "ALREADY_REFUNDED",
          "SYSTEM_ERROR"
        ],
        "type": "string"
      },
      "CheckoutCancelMessage": {
        "description": "Complementa status de erro com a mensagem do erro de acordo com tabela abaixo:\n\nstatus|code|message\n-|-|-\n**DENIED**|ALREADY_CANCELLED|This payment was already cancelled.\n**DENIED**|CANCELLED_BY_USER|This payment was already cancelled.\n**DENIED**|CANCELLED_BY_SELLER|This payment was already cancelled.\n**DENIED**|CANCELLED_BY_USER|This payment was already cancelled.\n**DENIED**|CANCELLED_BY_SELLER|This payment was already cancelled.\n**DENIED**|ALREADY_DENIED|This payment was denied by user or institution and cannot be refunded.\n**DENIED**|ALREADY_SETTLED|This payment was already settled. Use refund endpoint instead.\n**DENIED**|ALREADY_REFUNDED|This payment was already refunded.\n**ERROR**|SYSTEM_ERROR|The system can not process this payment now. Please try again later.\n",
        "type": "string"
      },
      "CheckoutCancelResponse": {
        "title": "CheckoutResponse",
        "required": [
          "pspReferenceId",
          "referenceId",
          "status"
        ],
        "type": "object",
        "properties": {
          "referenceId": {
            "description": "O mesmo *referenceId* enviado na solicitação.\n",
            "type": "string"
          },
          "pspReferenceId": {
            "description": "Identifica um único pagamento. É utilizado para toda comunicação sobre o status de pagamento.\n",
            "type": "string"
          },
          "status": {
            "$ref": "#/components/schemas/CheckoutCancelStatus",
            "description": "Status do pedido de pagamento."
          },
          "code": {
            "$ref": "#/components/schemas/CheckoutCancelCode",
            "description": "Código que complementa o status."
          },
          "message": {
            "$ref": "#/components/schemas/CheckoutCancelMessage",
            "description": "Mensagem amigável que descreve o código."
          }
        }
      },
      "RefundCreationRequest": {
        "title": "Root Type for Refund",
        "description": "",
        "required": [
          "amount",
          "transactionRefundId"
        ],
        "type": "object",
        "properties": {
          "amount": {
            "$ref": "#/components/schemas/RefundAmount",
            "description": "Valor do estorno."
          },
          "transactionRefundId": {
            "description": "Identificação da transação relacionada a esse estorno. Deve ser única por estorno.",
            "type": "string"
          },
          "notes": {
            "description": "Comentário sobre o estorno.",
            "type": "string"
          }
        },
        "example": {
          "transactionRefundId": "234982-abcde-1235",
          "amount": {
            "value": 110.01,
            "currency": "BRL"
          },
          "notes": "Cliente recebeu produto com defeito."
        }
      },
      "RefundCreationStatus": {
        "description": "Status de um pedido de estorno.\n\nStatus|Descrição\n-|-\n**REFUNDING**|O pedido de estorno está sendo processado.\n**ERROR**|Informa que um erro ocorreu com o pedido de estorno em conjunto do descrição do erro.\n",
        "enum": [
          "OPEN",
          "REFUNDING",
          "ERROR"
        ],
        "type": "string"
      },
      "RefundCreationResponse": {
        "required": [
          "pspReferenceId",
          "status",
          "refundId"
        ],
        "type": "object",
        "properties": {
          "pspReferenceId": {
            "description": "Identifica um único pagamento. É utilizado para toda comunicação sobre o status de pagamento.\n",
            "type": "string"
          },
          "status": {
            "$ref": "#/components/schemas/RefundCreationStatus",
            "description": "Status do estorno do pagamento."
          },
          "refundId": {
            "description": "Identificador do estorno criado.",
            "type": "string"
          }
        }
      },
      "RefundInvalidResponse": {
        "required": [
          "status",
          "message",
          "stackId"
        ],
        "title": "BadRequest Error response",
        "description": "Schema da resposta quando erro for 400 BadRequest",
        "type": "object",
        "properties": {
          "status": {
            "description": "Código de erro.",
            "type": "string"
          },
          "message": {
            "description": "Mensagem de erro.",
            "type": "string"
          },
          "details": {
            "description": "Detalhes do erro.",
            "type": "object"
          },
          "stackId": {
            "description": "Id da stack do erro.",
            "type": "string"
          }
        },
        "example": {
          "status": "400",
          "message": "[400] Invalid Refund id; (stackId: cb3333-f33d-3c3f-b33e-f3f33333fe3f)",
          "details": {}
        }
      },
      "RefundStatusResponse": {
        "title": "StatusResponse",
        "required": [
          "transactionRefundId",
          "pspReferenceId",
          "refundId",
          "status",
          "dueDate",
          "amount"
        ],
        "type": "object",
        "properties": {
          "pspReferenceId": {
            "description": "Identifica um único pagamento. É utilizado para toda comunicação sobre o status de pagamento.\n",
            "type": "string"
          },
          "transactionRefundId": {
            "description": "Identificação da transação relacionada a esse estorno.\nDeve ser única por estorno.\n\nObservação: Quando for retornado `CREATED_BY_SELLER_PANEL`, significa que o estorno\nfoi criado pelo [painel do lojista](https://painel.nupaybusiness.com.br) e, portanto,\nnão possui o identificador único do e-commerce salvo na NuPay for Business.\n",
            "type": "string"
          },
          "refundId": {
            "description": "Identifica um único estorno.\n",
            "type": "string"
          },
          "status": {
            "$ref": "#/components/schemas/RefundStatus",
            "description": "Status do estorno do pagamento."
          },
          "dueDate": {
            "format": "date-time",
            "description": "Data limite para a composição do estorno.",
            "type": "string"
          },
          "amount": {
            "$ref": "#/components/schemas/RefundAmount",
            "description": "Valor do estorno."
          },
          "error": {
            "$ref": "#/components/schemas/RefundError",
            "description": "Erro durante a criação ou execução de um estorno."
          },
          "source": {
            "description": "Canal (Painel ou API) pelo qual o estorno foi solicitado.",
            "type": "string",
            "example": "panel"
          }
        }
      },
      "PaymentOrderNotificationCallback": {
        "title": "Notification callback",
        "description": "Schema da requisição de notificação enviada pela NuPay for Business",
        "type": "object",
        "required": [
          "pspReferenceId",
          "referenceId",
          "timestamp",
          "paymentMethodType"
        ],
        "properties": {
          "pspReferenceId": {
            "description": "Identificador único do pedido no sistema",
            "type": "string",
            "example": "1339b906-21d2-425d-b388-77b976a75310"
          },
          "referenceId": {
            "description": "Identificador único do pedido no sistema do e-commerce.",
            "type": "string",
            "example": "abcdef123456"
          },
          "timestamp": {
            "description": "Momento exato (ISO String) da mudança de estado.",
            "type": "string",
            "example": "2020-01-01T14:22:18.572Z"
          },
          "paymentMethodType": {
            "description": "Método de pagamento do pedido",
            "type": "string",
            "example": "nupay"
          }
        }
      },
      "NotificationCallbackErrorResponse": {
        "title": "Notification callback error response",
        "description": "Schema da resposta à chamada de notificação quando há algum erro",
        "type": "object",
        "required": [
          "code"
        ],
        "properties": {
          "code": {
            "description": "Código de erro\n\nStatus|Descrição\n-|-\n**invalid_signature**|A assinatura enviada na requisição não foi verificada com sucesso.\n**stale_request**|O timestamp enviado na requisição está muito atrasado em relação ao tempo local da aplicação que o recebeu.\n**other**|Algum outro erro não definido nos outros códigos. Passar mais detalhes por mensagem.\n",
            "enum": [
              "invalid_signature",
              "stale_request",
              "other"
            ],
            "type": "string"
          },
          "message": {
            "type": "string",
            "description": "Campo opcional para fornecimento de mais detalhes do erro"
          }
        }
      },
      "RefundNotificationCallback": {
        "title": "Notification callback",
        "description": "Schema da requisição de notificação enviada pela NuPay for Business",
        "type": "object",
        "required": [
          "pspReferenceId",
          "transactionRefundId",
          "refundId",
          "timestamp"
        ],
        "properties": {
          "referenceId": {
            "description": "Identificador único do pedido no sistema do e-commerce.",
            "type": "string",
            "example": "abcdef123456"
          },
          "pspReferenceId": {
            "description": "Identificador único do pedido no sistema",
            "type": "string",
            "example": "1339b906-21d2-425d-b388-77b976a75310"
          },
          "transactionRefundId": {
            "description": "Identificação da transação relacionada a esse estorno. Deve ser única por estorno.\n\nObservação: Quando for enviado `CREATED_BY_SELLER_PANEL`, significa que o estorno\nfoi criado pelo [painel do lojista](https://painel.nupaybusiness.com.br) e, portanto,\nnão possui o identificador único do e-commerce salvo na NuPay for Business.\n",
            "type": "string",
            "example": "234982-abcde-1235"
          },
          "refundId": {
            "description": "Identificador único do pedido de estorno no sistema.",
            "type": "string",
            "example": "ca0c64c4-ea11-4719-b5b5-7cf4c4b20e91"
          },
          "timestamp": {
            "description": "Momento exato (ISO String) da mudança de estado.",
            "type": "string",
            "example": "2020-01-01T14:22:18.572Z"
          }
        }
      },
      "GetAuthorizationLink200Response": {
        "type": "object",
        "description": null,
        "properties": {
          "redirect_uri": {
            "type": "string",
            "format": "uri",
            "description": "URL para redirecionar o cliente para o fluxo de autorização no aplicativo do Nubank.\n\nEsta URL contém alguns parâmetros de URL que precisam ser tratados pelo e-commerce:\n\nNome do parâmetro | Descrição\n- | -\n**state** | Obrigatório. Estado de validação enviado pelo e-commerce na requisição para gerar a URL e pode ser usado para validar a resposta.\n**error** | Opcional. Indica que houve um erro ao gerar a URL. \n**error_description** | Opcional. Descrição da causa do erro ao gerar a URL. \n"
          }
        },
        "required": [
          "redirect_uri"
        ]
      },
      "GetAuthorizationLink400Response": {
        "type": "object",
        "description": "Objeto com a mensagem de erro e sua descrição.",
        "properties": {
          "error": {
            "type": "string",
            "enum": [
              "invalid_request",
              "server_error",
              "temporarily_unavailable"
            ],
            "description": "Identificação do tipo do erro.\n"
          },
          "error_description": {
            "type": "string",
            "description": "Descrição do erro.\n\nErro|Descrição\n-|-\n**invalid_request**|A requisição está malformada, falta algum parâmetro ou inclui algum parâmetro inválido.\n**server_error**|O servidor de autorização encontrou um erro inesperado.\n**temporarily_unavailable**|O servidor de autorização não consegue atender a requisição nesse momento.\n"
          },
          "state": {
            "type": "string",
            "description": "Estado de validação gerado pelo e-commerce e pode ser utilizado para validar a requisição de retorno."
          }
        },
        "required": [
          "error",
          "error_description",
          "state"
        ]
      },
      "OAuthAuthorizationCodeRequest": {
        "type": "object",
        "description": null,
        "properties": {
          "client_assertion_type": {
            "type": "string",
            "default": "urn%3Aietf%3Aparams%3Aoauth%3Aclient-assertion-type%3Ajwt-bearer",
            "description": "Envie o valor `\"urn%3Aietf%3Aparams%3Aoauth%3Aclient-assertion-type%3Ajwt-bearer\"`."
          },
          "client_assertion": {
            "type": "string",
            "description": "Token JWT gerado para autorização da request."
          },
          "grant_type": {
            "type": "string",
            "default": "authorization_code",
            "description": "Envie o valor `\"authorization_code\"`."
          },
          "code_verifier": {
            "type": "string",
            "description": "Valor utilizado para gerar o `code_challenge` da requisição para [gerar a URL de autorização](#operation/GenerateAuthorizationUrl)."
          },
          "code": {
            "type": "string",
            "description": "Recebido após a conclusão da autorização pelo cliente."
          },
          "redirect_uri": {
            "type": "string",
            "description": "URL de redirecionamento do e-commerce.\n**Deve ser o mesmo valor enviado para [gerar a URL de autorização](#operation/GenerateAuthorizationUrl)**."
          }
        },
        "required": [
          "client_assertion_type",
          "client_assertion",
          "grant_type",
          "code_verifier",
          "code",
          "redirect_uri"
        ]
      },
      "OAuthRefreshTokenRequest": {
        "type": "object",
        "description": null,
        "properties": {
          "client_assertion_type": {
            "type": "string",
            "default": "urn%3Aietf%3Aparams%3Aoauth%3Aclient-assertion-type%3Ajwt-bearer",
            "description": "Envie o valor `\"urn%3Aietf%3Aparams%3Aoauth%3Aclient-assertion-type%3Ajwt-bearer\"`."
          },
          "client_assertion": {
            "type": "string",
            "description": "Token JWT gerado para autorização da request."
          },
          "grant_type": {
            "type": "string",
            "default": "refresh_token",
            "description": "Envie o valor `\"refresh_token\"`."
          },
          "code_verifier": {
            "type": "string",
            "description": "Valor utilizado para gerar o `code_challenge` da requisição para [gerar a URL de autorização](#operation/GenerateAuthorizationUrl)."
          },
          "refresh_token": {
            "type": "string",
            "description": "Refresh token gerado."
          }
        },
        "required": [
          "client_assertion_type",
          "client_assertion",
          "grant_type",
          "code_verifier",
          "refresh_token"
        ]
      },
      "CibaAccessTokenRequest": {
        "type": "object",
        "description": null,
        "properties": {
          "client_id": {
            "type": "string",
            "description": "Client ID gerado pelo time NuPay e informado no momento do onboarding."
          },
          "client_assertion_type": {
            "type": "string",
            "description": "Deve sempre informar `urn:ietf:params:oauth:client-assertion-type:jwt-bearer`."
          },
          "client_assertion": {
            "type": "string",
            "description": "Token JWT gerado para autorização da request."
          },
          "grant_type": {
            "type": "string",
            "description": "Deve sempre informar `refresh_token`."
          },
          "refresh_token": {
            "type": "string",
            "description": "Refresh token gerado."
          }
        },
        "required": [
          "client_id",
          "client_assertion_type",
          "client_assertion",
          "grant_type",
          "refresh_token"
        ]
      },
      "OAuthAuthorizationCode200Response": {
        "type": "object",
        "description": null,
        "properties": {
          "access_token": {
            "type": "string",
            "description": "Access token gerado."
          },
          "token_type": {
            "type": "string",
            "description": "Tipo do token gerado."
          },
          "expires_in": {
            "type": "number",
            "description": "Tempo de expiração do access token em segundos."
          },
          "refresh_token": {
            "type": "string",
            "description": "Refresh token gerado."
          }
        }
      },
      "OAuthRefreshToken200Response": {
        "type": "object",
        "description": null,
        "properties": {
          "access_token": {
            "type": "string",
            "description": "Access token gerado."
          },
          "token_type": {
            "type": "string",
            "description": "Tipo do token gerado."
          },
          "expires_in": {
            "type": "number",
            "description": "Tempo de expiração do access token em segundos."
          },
          "refresh_token": {
            "type": "string",
            "description": "Refresh token gerado."
          }
        }
      },
      "CibaAccessToken200Response": {
        "type": "object",
        "description": null,
        "properties": {
          "access_token": {
            "type": "string",
            "description": "Access token gerado."
          },
          "token_type": {
            "type": "string",
            "description": "Tipo do token gerado."
          },
          "expires_in": {
            "type": "number",
            "description": "Tempo de expiração do access token em segundos."
          },
          "refresh_token": {
            "type": "string",
            "description": "Refresh token gerado."
          }
        }
      },
      "OAuthAuthorizationCode400Response": {
        "type": "object",
        "description": null,
        "properties": {
          "error": {
            "type": "string",
            "enum": [
              "invalid_request",
              "unauthorized_client",
              "access_denied",
              "unsupported_response_type",
              "invalid_scope",
              "server_error",
              "temporarily_unavailable"
            ],
            "description": "Erro|Descrição\n -|-\n **invalid_request**|A requisição está malformada, falta algum parâmetro ou inclui algum parâmetro inválido.\n **unauthorized_client**|O cliente não está autorizado a requisitar um `code` desta maneira.\n **access_denied**|O servidor de autorização negou essa requisição.\n **unsupported_response_type**|O servidor de autorização não tem suporte para esse tipo de método de requisição de `code`.\n **invalid_scope**|Um ou todos os escopos requisitados são inválidos.\n **server_error**|O servidor de autorização encontrou um erro inesperado.\n **temporarily_unavailable**|O servidor de autorização não consegue atender a requisição nesse momento.\n"
          },
          "error_description": {
            "type": "enum",
            "description": "Descrição do erro com dados adicionais."
          },
          "state": {
            "type": "enum",
            "description": "Estado de validação gerado pelo e-commerce e pode ser utilizado para validar a requisição de retorno."
          }
        }
      },
      "OAuthRefreshToken400Response": {
        "type": "object",
        "description": null,
        "properties": {
          "error": {
            "type": "string",
            "enum": [
              "invalid_request",
              "unauthorized_client",
              "access_denied",
              "unsupported_response_type",
              "invalid_scope",
              "server_error",
              "temporarily_unavailable"
            ],
            "description": "Erro|Descrição\n -|-\n **invalid_request**|A requisição está malformada, falta algum parâmetro ou inclui algum parâmetro inválido.\n **unauthorized_client**|O cliente não está autorizado a requisitar um `access_token` desta maneira.\n **access_denied**|O servidor de autorização negou essa requisição.\n **unsupported_response_type**|O servidor de autorização não tem suporte para esse tipo de método de requisição de `access_token`.\n **invalid_scope**|Um ou todos os escopos requisitados são inválidos.\n **server_error**|O servidor de autorização encontrou um erro inesperado.\n **temporarily_unavailable**|O servidor de autorização não consegue atender a requisição nesse momento.\n"
          },
          "error_description": {
            "type": "enum",
            "description": "Descrição do erro com dados adicionais."
          }
        }
      },
      "CibaAccessToken400Response": {
        "type": "object",
        "description": null,
        "properties": {
          "error": {
            "type": "string",
            "enum": [
              "invalid_request",
              "invalid_client",
              "invalid_grant",
              "unauthorized_client",
              "unsupported_grant_type",
              "invalid_scope"
            ],
            "description": "Erro|Descrição|Tratativa\n  -|-|-\n  **invalid_request**        | A requisição está malformada, falta algum parâmetro ou inclui algum parâmetro inválido.                                       | Verifique se a requisição possui todos os parâmetros obrigatórios e garanta que ela está sendo enviada com os valores e formato corretos.\n  **invalid_client**         | A autenticação falhou, cliente pode ser desconhecido, falta de dados de autenticação ou método de autenticação não suportado. | Verifique se o `client_id`, JWT e JWK utilizados são válidos e se o método de autenticação está correto.\n  **invalid_grant**          | O `refresh_token` utilizado está inválido, revogado ou expirado.                                 | Verifique se o `refresh_token` utilizado está correto e se o `redirect_uri` informado é o que está autorizado.\n  **unauthorized_client**    | O cliente não está autorizado a utilizar essa forma de autenticação.                                                         | Seu cliente de autenticação pode estar inativo ou o consumidor cancelou a autorização, veja mais detalhes no `error_description`.\n  **unsupported_grant_type** | O `grant_type` não é suportado.|Verifique se o `grant_type` está correto.                                                     |\n  **invalid_scope**          | Um ou todos os escopos requisitados são inválidos.                                                                            | Verifique se os `scope` solicitados na geração de url de autorização estão corretos.\n"
          },
          "error_description": {
            "type": "enum",
            "description": "Descrição do erro com dados adicionais."
          }
        }
      },
      "CibaAuthorizationRequest": {
        "type": "object",
        "description": null,
        "properties": {
          "parameters": {
            "type": "string",
            "description": "Dentro do campo `parameters` campos e valores devem ser concatenados como `queryString`.\n\nEsperamos os seguintes parâmetros dentro de `parameters`:\nCampo|Descrição\n-|-\n**login_hint**                | CPF do cliente.\n**client_assertion_type**     | Deve sempre informar `urn:ietf:params:oauth:client-assertion-type:jwt-bearer`.\n**client_assertion**          | Token JWT gerado para autorização da requisição.\n**client_notification_token** | É um `bearer token` fornecido pelo client e será usado pelo NuPay para autenticar o callback para o `client`. Para o auth_method=`otp` será a mesma informação do client_assertion.\n**scope**                     | Deve sempre informar `openid` e `charge`. Caso queira consultar as condições de pagamento adicionar também `payment_conditions`.\n**auth_method**               | **Se o método de autenticação escolhido for OTP** deve sempre informar `otp`, caso contrário esse campo não deve ser informado.\n"
          }
        },
        "required": [
          "parameters"
        ]
      },
      "CibaAuthorization200Response": {
        "type": "object",
        "description": null,
        "properties": {
          "auth_req_id": {
            "type": "string",
            "description": "Este é um identificador único para identificar o pedido de autenticação feito pelo parceiro."
          },
          "masked_phone_number": {
            "type": "string",
            "description": "Número de telefone do cliente mascarado ao qual foi enviado o SMS. **Esse campo só será retornado caso o metódo de authenticação seja OTP e o SMS foi enviado com sucesso.**"
          },
          "ticket": {
            "type": "string",
            "description": "Ticket de autorização para o cliente. **Esse campo só será retornado caso o metódo de authenticação seja OTP.**"
          },
          "expires_in": {
            "type": "number",
            "description": "Tempo de expiração do `auth_req_id` em segundos."
          }
        }
      },
      "CibaAuthorization400Response": {
        "type": "object",
        "description": null,
        "properties": {
          "error": {
            "type": "string",
            "enum": [
              "invalid_request",
              "invalid_scope",
              "unauthorized_client",
              "not_eligible"
            ],
            "description": "Erro|Descrição|Tratativa\n  -|-|-\n  **invalid_request**        | A requisição está malformada, falta algum parâmetro ou inclui algum parâmetro inválido. | Verifique se a requisição possui todos os parâmetros obrigatórios e garanta que ela está sendo enviada com os valores e formato corretos.\n  **invalid_scope**          | Um ou todos os escopos requisitados são inválidos.                                      | Verifique se os `scope` solicitados na geração de url de autorização estão corretos.\n  **unauthorized_client**    | O cliente não está autorizado a utilizar essa forma de autenticação.                   | Seu cliente de autenticação pode estar inativo ou o consumidor cancelou a autorização, veja mais detalhes no `error_description`.\n  **not_eligible**           | O cliente não é elegível para autenticação via OTP (OTP Apenas).                        | O cliente não é elegível para autenticação via OTP.\n"
          },
          "error_description": {
            "type": "string",
            "description": "Descrição do erro com dados adicionais."
          }
        }
      },
      "OTPCompleteRequest": {
        "type": "object",
        "description": null,
        "properties": {
          "parameters": {
            "type": "string",
            "description": "Dentro do campo `parameters` campos e valores devem ser concatenados como `queryString`.\n\nEsperamos os seguintes parâmetros obrigatórios dentro de `parameters`:\nCampo|Descrição\n-|-\n**login_hint**                | CPF do cliente.\n**client_assertion_type**     | Deve sempre informar `urn:ietf:params:oauth:client-assertion-type:jwt-bearer`.\n**client_assertion**          | Token JWT gerado para autorização da requisição.\n"
          },
          "otp": {
            "type": "string",
            "description": "Código de autenticação recebido pelo cliente."
          },
          "ticket": {
            "type": "string",
            "description": "Ticket de autorização para o cliente."
          }
        },
        "required": [
          "parameters",
          "ticket",
          "otp"
        ]
      },
      "OTPComplete200Response": {
        "type": "object",
        "description": null,
        "properties": {
          "auth_code": {
            "type": "string",
            "description": "Codigo de autorização, indicando que o cliente foi autenticado com sucesso."
          },
          "access_token": {
            "type": "string",
            "description": "Access token gerado"
          },
          "refresh_token": {
            "type": "string",
            "description": "Refresh token gerado"
          }
        }
      },
      "OTPComplete400Response": {
        "type": "object",
        "description": null,
        "properties": {
          "error": {
            "type": "string",
            "enum": [
              "invalid_request",
              "invalid_scope",
              "unauthorized_client",
              "not_eligible"
            ],
            "description": "Erro|Descrição|Tratativa\n  -|-|-\n  **invalid_request**        | A requisição está malformada, falta algum parâmetro ou inclui algum parâmetro inválido. | Verifique se a requisição possui todos os parâmetros obrigatórios e garanta que ela está sendo enviada com os valores e formato corretos.\n  **invalid_scope**          | Um ou todos os escopos requisitados são inválidos.                                      | Verifique se os `scope` solicitados na geração de url de autorização estão corretos.\n  **unauthorized_client**    | O cliente não está autorizado a utilizar essa forma de autenticação.                   | Seu cliente de autenticação pode estar inativo ou o consumidor cancelou a autorização, veja mais detalhes no `error_description`.\n  **not_eligible**           | O cliente não é elegível para autenticação via OTP.                                     | O cliente não é elegível para autenticação via OTP.\n"
          },
          "error_description": {
            "type": "string",
            "description": "Descrição do erro com dados adicionais."
          }
        }
      },
      "OTPResendRequest": {
        "type": "object",
        "description": null,
        "properties": {
          "login_hint": {
            "type": "string",
            "description": "CPF do cliente que deseja reenviar o código."
          },
          "ticket": {
            "type": "string",
            "description": "Ticket de autorização gerado no primeiro passo da autenticação."
          }
        },
        "required": [
          "login_hint",
          "ticket"
        ]
      },
      "OTPResend400Response": {
        "type": "object",
        "description": null,
        "properties": {
          "error": {
            "type": "string",
            "enum": [
              "invalid_request",
              "invalid_scope",
              "unauthorized_client",
              "not_eligible"
            ],
            "description": "Erro|Descrição|Tratativa\n  -|-|-\n  **invalid_request**        | A requisição está malformada, falta algum parâmetro ou inclui algum parâmetro inválido. | Verifique se a requisição possui todos os parâmetros obrigatórios e garanta que ela está sendo enviada com os valores e formato corretos.\n  **invalid_scope**          | Um ou todos os escopos requisitados são inválidos.                                      | Verifique se os `scope` solicitados na geração de url de autorização estão corretos.\n  **unauthorized_client**    | O cliente não está autorizado a utilizar essa forma de autenticação.                   | Seu cliente de autenticação pode estar inativo ou o consumidor cancelou a autorização, veja mais detalhes no `error_description`.\n  **not_eligible**           | O cliente não é elegível para autenticação via OTP.                                     | O cliente não é elegível para autenticação via OTP.\n"
          },
          "error_description": {
            "type": "enum",
            "description": "Descrição do erro com dados adicionais."
          }
        }
      },
      "CibaAuthorizationNotificationRequest": {
        "type": "object",
        "description": null,
        "properties": {
          "auth_req_id": {
            "description": "Identificador único utilizado para associar o retorno da notificação no endpoint de callback, com a solicitação de autorização.",
            "type": "string"
          },
          "access_token": {
            "description": "Access token gerado.",
            "type": "string"
          },
          "token_type": {
            "description": "Tipo do token gerado.",
            "type": "string"
          },
          "refresh_token": {
            "description": "Refresh token gerado.",
            "type": "string"
          },
          "expires_in": {
            "description": "Tempo de expiração do access token em segundos.",
            "type": "int"
          },
          "id_token": {
            "description": "Token JWT que atua como uma assinatura desanexada",
            "type": "string"
          },
          "error_description": {
            "description": "Descrição do erro.",
            "type": "string"
          },
          "error": {
            "description": "Código do erro.",
            "type": "string"
          }
        },
        "required": [
          "auth_req_id",
          "access_token",
          "token_type",
          "refresh_token",
          "expires_in",
          "id_token",
          "error_description",
          "error"
        ]
      },
      "PaymentConditionItem": {
        "title": "PaymentConditionItem",
        "description": "Objeto que contém as informações de parcelamento.\n",
        "required": [
          "quantity",
          "amount"
        ],
        "type": "object",
        "properties": {
          "quantity": {
            "description": "Quantidade de parcelas.\n",
            "type": "number"
          },
          "amount": {
            "description": "Valor da parcela.\n",
            "type": "number",
            "format": "double"
          },
          "amountPercentage": {
            "description": "Percentual do valor de origem da compra.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "interest": {
            "description": "Percentual taxa de juros.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "interestAmount": {
            "description": "Valor da taxa de juros.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "iof": {
            "description": "Valor de IOF a.m.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "iofPercentage": {
            "description": "Percentual de IOF a.m.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "totalAmount": {
            "description": "Valor total a ser pago, valor da parcela mais juros e iof.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "totalAmountPercentage": {
            "description": "Percentual total a ser pago, valor da parcela mais juros e iof.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "amountContracted": {
            "description": "Valor de origem somado ao valor de iof.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "amountContractedPercentage": {
            "description": "Valor de origem somado ao percentual de iof.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "cet": {
            "description": "Custo efetivo total.\n",
            "type": "number",
            "required": false,
            "format": "double"
          }
        }
      },
      "PaymentConditionResponse": {
        "title": "PaymentConditionsResponse",
        "required": [
          "type",
          "installmentPlans",
          "amount"
        ],
        "type": "object",
        "properties": {
          "type": {
            "description": "Método de pagamento.",
            "type": "string"
          },
          "amount": {
            "description": "Valor a ser pago.",
            "type": "number"
          },
          "installmentPlans": {
            "description": "Lista com as informações de parcelamento.\n",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PaymentConditionItem"
            }
          }
        }
      },
      "PaymentConditions": {
        "title": "PaymentConditionItem",
        "description": "Objeto que contém as informações de parcelamento\n",
        "required": [
          "amount",
          "document"
        ],
        "properties": {
          "amount": {
            "description": "Valor da compra.\n",
            "type": "number",
            "format": "double"
          },
          "document": {
            "description": "CPF do usuário.\n",
            "type": "string",
            "format": "string"
          }
        }
      },
      "GoneErrorResponse": {
        "title": "Gone Error responses",
        "description": "Schema de resposta para erro 410 Gone",
        "type": "object",
        "properties": {
          "status": {
            "description": "Código Erro.",
            "type": "string"
          },
          "message": {
            "description": "Mensagem do Erro.",
            "type": "string"
          },
          "details": {
            "description": "Descrição do erro.",
            "type": "string"
          }
        },
        "example": {
          "status": "410",
          "message": "gone",
          "details": "Este endpoint foi descontinuado. Por favor, utilize POST /v2/checkouts/payment-conditions. Documentação: https://docs.nupaybusiness.com.br/checkout/docs/openapi/index.html#tag/Payment-conditions"
        }
      },
      "PaymentMethodInput": {
        "title": "PaymentMethodInput",
        "description": "Objeto que contém informações sobre um método de pagamento específico e seu valor\n",
        "required": [
          "amount",
          "type"
        ],
        "properties": {
          "amount": {
            "description": "Valor específico para este método de pagamento.\n",
            "type": "number",
            "format": "double",
            "example": 90
          },
          "type": {
            "description": "Tipo do método de pagamento.\n",
            "type": "string",
            "enum": [
              "debit",
              "credit",
              "credit_with_additional_limit"
            ],
            "example": "debit"
          }
        }
      },
      "PaymentConditions-2": {
        "title": "PaymentConditions",
        "description": "Objeto que contém as informações para consultar condições de pagamento\n",
        "required": [
          "amount"
        ],
        "properties": {
          "amount": {
            "description": "Valor da compra. Usado como valor padrão quando não há um valor definido para um método de pagamento em `paymentMethods`.\n",
            "type": "number",
            "format": "double",
            "example": 100
          },
          "document": {
            "required": false,
            "description": "CPF do usuário. Obrigatório caso não esteja no fluxo **pré-autorizado** de NuPay.\n",
            "type": "string",
            "format": "string",
            "example": "98765432108"
          },
          "paymentMethods": {
            "required": false,
            "description": "Lista de métodos de pagamento com valores específicos. Se não informado ou vazio, será usado o valor de `amount` para todos os métodos disponíveis.\n",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PaymentMethodInput"
            },
            "example": [
              {
                "amount": 90,
                "type": "debit"
              },
              {
                "amount": 95,
                "type": "credit_with_additional_limit"
              }
            ]
          }
        }
      },
      "PaymentConditionItem-2": {
        "title": "PaymentConditionItem",
        "description": "Objeto que contém as informações de parcelamento.\n",
        "required": [
          "quantity",
          "amount"
        ],
        "type": "object",
        "properties": {
          "quantity": {
            "description": "Quantidade de parcelas.\n",
            "type": "number"
          },
          "amount": {
            "description": "Valor da parcela.\n",
            "type": "number",
            "format": "double"
          },
          "amountPercentage": {
            "description": "Percentual do valor de origem da compra.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "interest": {
            "description": "Percentual taxa de juros.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "interestAmount": {
            "description": "Valor da taxa de juros.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "iof": {
            "description": "Valor de IOF a.m.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "iofPercentage": {
            "description": "Percentual de IOF a.m.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "totalAmount": {
            "description": "Valor total a ser pago, valor da parcela mais juros e iof.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "totalAmountPercentage": {
            "description": "Percentual total a ser pago, valor da parcela mais juros e iof.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "amountContracted": {
            "description": "Valor de origem somado ao valor de iof.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "amountContractedPercentage": {
            "description": "Valor de origem somado ao percentual de iof.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "cet": {
            "description": "Custo efetivo total.\n",
            "type": "number",
            "required": false,
            "format": "double"
          },
          "installmentPlanAdditionalLimit": {
            "description": "Limite aditional concedido ao cliente que será utilizado na parcela.\n",
            "type": "number",
            "required": false,
            "format": "double"
          }
        }
      },
      "PaymentConditionResponse-2": {
        "title": "PaymentConditionsResponse",
        "description": "Array de condições de pagamento",
        "type": "array",
        "items": {
          "title": "PaymentCondition",
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "debit",
                "credit",
                "credit_with_additional_limit"
              ],
              "description": "Método de pagamento."
            },
            "amount": {
              "type": "number",
              "description": "Valor a ser pago."
            },
            "installmentPlans": {
              "type": "array",
              "description": "Lista com as informações de parcelamento.",
              "items": {
                "$ref": "#/components/schemas/PaymentConditionItem-2"
              }
            },
            "additionalLimitMessage": {
              "type": "string",
              "description": "Mensagem do limite adicional que será aplicado. Exemplo - \"Não consome limite do cartão\" ou \"R$ 999,00 para essa compra\"."
            }
          },
          "required": [
            "type",
            "amount",
            "installmentPlans"
          ]
        }
      },
      "RecipientRequest": {
        "type": "object",
        "description": "Requisição para criação de um beneficiário final.",
        "required": [
          "referenceId",
          "country",
          "name",
          "document",
          "documentType"
        ],
        "properties": {
          "referenceId": {
            "description": "Identificador único do beneficiário no sistema do merchant. Aceita letras, números, ponto (.), hífen (-) e underscore (_).",
            "type": "string",
            "maxLength": 100,
            "pattern": "^[a-zA-Z0-9._-]{1,50}$",
            "example": "8943dd2c-e743-46a5-b953-45f806022210"
          },
          "country": {
            "type": "string",
            "description": "Código do país do beneficiário no formato ISO 3166-1 alpha-2. Use `Other` para países não listados.",
            "enum": [
              "BR",
              "MX",
              "CO",
              "US",
              "HK",
              "KY",
              "PA",
              "CH",
              "Other"
            ],
            "example": "BR"
          },
          "name": {
            "description": "Razão social ou nome do beneficiário final.",
            "type": "string",
            "example": "Empresa Exemplo Ltda"
          },
          "document": {
            "description": "Número do documento do beneficiário.\n- CPF: 11 dígitos\n- CNPJ: 14 dígitos\n- Other: máximo de 50 caracteres\n",
            "type": "string",
            "example": "12345678000195"
          },
          "documentType": {
            "description": "Tipo do documento do beneficiário.",
            "type": "string",
            "enum": [
              "CPF",
              "CNPJ",
              "Other"
            ],
            "example": "CNPJ"
          }
        }
      },
      "RecipientResponse": {
        "type": "object",
        "properties": {
          "recipient": {
            "type": "object",
            "description": "Dados do beneficiário criado.",
            "properties": {
              "referenceId": {
                "type": "string",
                "format": "uuid",
                "description": "Identificador único do beneficiário no sistema do merchant.",
                "example": "a1784b59-f848-49f2-ae3c-d5d1f8a472cb"
              }
            }
          }
        }
      },
      "RecipientHistoryEntry": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Razão social ou nome do beneficiário na versão anterior",
            "example": "Restaurante Exemplo LTDA"
          },
          "document": {
            "type": "string",
            "description": "Documento na versão anterior",
            "example": "12345678000195"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Data e hora de criação desta versão",
            "example": "2025-12-16T10:30:00Z"
          },
          "deletedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Data e hora de remoção desta versão",
            "example": "2025-12-16T14:15:00Z"
          }
        }
      },
      "RecipientGetResponse": {
        "type": "object",
        "properties": {
          "country": {
            "type": "string",
            "description": "País do beneficiário final",
            "example": "BR"
          },
          "referenceId": {
            "type": "string",
            "description": "Identificador único do beneficiário no sistema do merchant.",
            "example": "8943dd2c-e743-46a5-b953-45f806022210"
          },
          "merchantId": {
            "type": "string",
            "format": "uuid",
            "description": "ID do merchant no sistema",
            "example": "4fc11f31-7620-42c0-b8f3-84d12a6d1dea"
          },
          "name": {
            "type": "string",
            "description": "Nome ou razão social do beneficiário final",
            "example": "Restaurante Exemplo LTDA"
          },
          "document": {
            "type": "string",
            "description": "Documento do beneficiário final",
            "example": "12345678000195"
          },
          "documentType": {
            "type": "string",
            "enum": [
              "CPF",
              "CNPJ",
              "Other"
            ],
            "description": "Tipo de documento do beneficiário final",
            "example": "CNPJ"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Data e hora de criação do beneficiário",
            "example": "2025-12-06T10:30:00Z"
          },
          "history": {
            "type": "array",
            "description": "Histórico de versões anteriores do beneficiário",
            "items": {
              "$ref": "#/components/schemas/RecipientHistoryEntry"
            }
          }
        }
      },
      "RecipientNotFoundErrorResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "description": "Código do erro",
            "example": "RECIPIENT_NOT_FOUND"
          },
          "message": {
            "type": "string",
            "description": "Mensagem descritiva do erro",
            "example": "Recipient with referenceId '8943dd2c-e743-46a5-b953-45f806022210' not found."
          }
        }
      }
    },
    "examples": {
      "ValidNuPay2faPaymentCreationExample": {
        "value": {
          "merchantOrderReference": "123432abc",
          "transactionId": "D3AA1FC8372E430E8236649DB5EBD08E",
          "referenceId": "595b6e74-0030-43ab-9b89-8f2ec9923272",
          "merchantName": "Loja Teste",
          "storeName": "Loja Teste Campinas",
          "amount": {
            "value": 10.01,
            "currency": "BRL",
            "details": {
              "taxValue": 0.9
            }
          },
          "delayToAutoCancel": 15,
          "paymentMethod": {
            "type": "nupay",
            "authorizationType": "manually_authorized"
          },
          "paymentFlow": {
            "returnUrl": "https://mystore.example.com/checkout/order/return/v32478982",
            "cancelUrl": "https://mystore.example.com/checkout/order/cancel/v32478982"
          },
          "shopper": {
            "reference": "c1245228-1c68-11e6-94ac-0afa86a846a5",
            "firstName": "John",
            "lastName": "Doe",
            "document": "64262091040",
            "documentType": "CPF",
            "email": "john.doe@example.com",
            "phone": {
              "country": "55",
              "number": "21987654321"
            },
            "ip": "255.110.231.231",
            "locale": "pt-BR"
          },
          "shipping": {
            "value": 49.99,
            "company": "Correios",
            "address": {
              "country": "BRA",
              "street": "Praia de Botafogo St.,",
              "number": "300",
              "complement": "3o. Andar",
              "neighborhood": "Botafogo",
              "postalCode": "22250040",
              "city": "Rio de Janeiro",
              "state": "RJ"
            }
          },
          "billingAddress": {
            "country": "BRA",
            "street": "Rua Capote Valente",
            "number": "39",
            "neighborhood": "Pinheiros",
            "postalCode": "05409000",
            "city": "São Paulo",
            "state": "SP"
          },
          "items": [
            {
              "id": "132981",
              "description": "Produto Teste",
              "value": 10.01,
              "quantity": 1,
              "discount": 0,
              "taxAmount": 0.9,
              "amountExcludingTax": 9.11,
              "amountIncludingTax": 10.01
            }
          ],
          "recipients": [
            {
              "referenceId": "a1784b59-f848-49f2-ae3c-d5d1f8a472cb",
              "amount": {
                "value": 150.75,
                "currency": "BRL"
              }
            }
          ],
          "orderUrl": "https://admin.mystore.example.com/orders/v32478982",
          "callbackUrl": "https://api.example.com/some-path/to-notify/status-changes?an=mystore"
        }
      },
      "ValidNuPayPreAuthPaymentCreationExample": {
        "value": {
          "merchantOrderReference": "abc123456",
          "transactionId": "D3AA1FC8372E430E8236649DB5EBD08E",
          "referenceId": "595b6e74-0030-43ab-9b89-8f2ec9923272",
          "paymentMethod": {
            "type": "nupay",
            "fundingSource": "credit",
            "authorizationType": "pre_authorized"
          },
          "installments": 2,
          "merchantName": "Loja Teste",
          "storeName": "Loja Teste Campinas",
          "amount": {
            "value": 10.01,
            "currency": "BRL",
            "details": {
              "taxValue": 0.9
            }
          },
          "delayToAutoCancel": 15,
          "shopper": {
            "reference": "c1245228-1c68-11e6-94ac-0afa86a846a5",
            "firstName": "John",
            "lastName": "Doe",
            "document": "64262091040",
            "documentType": "CPF",
            "email": "john.doe@example.com",
            "phone": {
              "country": "55",
              "number": "21987654321"
            },
            "ip": "255.110.231.231",
            "locale": "pt-BR"
          },
          "shipping": {
            "value": 49.99,
            "company": "Correios",
            "address": {
              "country": "BRA",
              "street": "Praia de Botafogo St.,",
              "number": "300",
              "complement": "3o. Andar",
              "neighborhood": "Botafogo",
              "postalCode": "22250040",
              "city": "Rio de Janeiro",
              "state": "RJ"
            }
          },
          "billingAddress": {
            "country": "BRA",
            "street": "Rua Capote Valente",
            "number": "39",
            "neighborhood": "Pinheiros",
            "postalCode": "05409000",
            "city": "São Paulo",
            "state": "SP"
          },
          "items": [
            {
              "id": "132981",
              "description": "Produto Teste",
              "value": 10.01,
              "quantity": 1,
              "discount": 0,
              "taxAmount": 0.9,
              "amountExcludingTax": 9.11,
              "amountIncludingTax": 10.01
            }
          ],
          "recipients": [
            {
              "referenceId": "a1784b59-f848-49f2-ae3c-d5d1f8a472cb",
              "amount": {
                "value": 150.75,
                "currency": "BRL"
              }
            }
          ],
          "orderUrl": "https://admin.mystore.example.com/orders/v32478982",
          "callbackUrl": "https://api.example.com/some-path/to-notify/status-changes?an=mystore"
        }
      },
      "NuPayNotificationCallbackExample": {
        "value": {
          "referenceId": "12345678900009876",
          "pspReferenceId": "1e984614-1ce2-11ee-be56-0242ac120002",
          "timestamp": "2023-07-01T10:10:20.512Z",
          "paymentMethodType": "nupay"
        }
      },
      "PixNotificationCallbackExample": {
        "value": {
          "referenceId": "12345678900009876",
          "pspReferenceId": "1e984614-1ce2-11ee-be56-0242ac120002",
          "timestamp": "2023-07-01T10:10:20.512Z",
          "paymentMethodType": "pix"
        }
      },
      "RefundNotificationCallbackExample": {
        "value": {
          "referenceId": "12345678900009876",
          "refundId": "0a0e00a0-3ea4-400f-b7d1-1647dfc129a9",
          "pspReferenceId": "1e984614-1ce2-11ee-be56-0242ac120002",
          "transactionRefundId": "8e4b308e-dbf3-4f98-901a-05a7955daff7",
          "timestamp": "2023-07-01T10:10:20.512Z"
        }
      },
      "CibaAuthenticationNotificationSuccess": {
        "value": {
          "auth_req_id": "1c266114-a1be-4252-8ad1-04986c5b9ac1",
          "access_token": "eyJhbGciOiJSUzI1NiIsInR5cCI6ImF0K2p3dCIsImtpZCI6InhnbnlmbU9fSlhYMjZDMGNhaDZaSzk2TDBrVERWUy1fdHFMMzc0ODhNUWMifQ.eyJzdWIiOiJqaG9ubnkiLCJncmFudF90eXBlIjoidXJuOm9wZW5pZDpwYXJhbXM6Z3JhbnQtdHlwZTpjaWJhIiwic2NvcGUiOiJvcGVuaWQiLCJpc3MiOiJodHRwczovL3NhbmRib3gtYXV0aGVudGljYXRpb24uc3BpbnBheS5jb20uYnIiLCJleHAiOjE2OTU3MzY2NzMsImlhdCI6MTY5NTczNjM3MywiY2xpZW50X2lkIjoiMTAzODEyOTU5MjQzNTQiLCJqdGkiOiJCNkZRRmNWeU81RXBBRUNSc3pwdzg1MDM2MUc2U2ZkMG9OWmJaRVFBaWdZIn0.HJmTF3ShamzPJnbB-GNqZKOXRfxZutm50fT3yAkdR1MWcKsRwl-gF0VjoW0wg087Db7eZ9EjpwmYsUuarqS5s7yMr6Le6jwFF78RSDt_0cduwOHI6arbK6eBdBGeremrGoZf1EM5lzk3_eelO1XXpncubk8lsbnh4zqALILDzpVIh5DEPs_hAzeHkSORetnajk8heXC5Jl9PvnlS6Of7bbcfctxliEzDTm6BuiN__zt4b7snEiMslT8Srp2v2K2oagbAFovUPK0gDvyrxIV_Y9WmPrO6FShIYdinokwZ4baT7YgeOTZYGX0BBnkwkpAyXlbOIFUZBweEPWRTucj4WQ",
          "token_type\"": "Bearer",
          "refresh_token": "4bwc0ESC_IAhflf-ACC_vjD_ltc11ne-8gFPfA2Kx16",
          "expires_in": 120,
          "id_token\"": "eyJhbGciOiJIUzI1NiJ9.eyJhdF9oYXNoIjoiVko1Tk13QVlZWVBicFRTczg0QkctZyIsInN1YiI6bnVsbCwiYXVkIjoiMTAzODEyOTU5MjQzNTQiLCJ1cm46b3BlbmlkOnBhcmFtczpqd3Q6Y2xhaW06YXV0aF9yZXFfaWQiOiJzR0RxWldLdkd2ZzNqR2pMLUoxLXplbVMwSjhvWTBGOEx3UklTX1g3UURzIiwidXJuOm9wZW5pZDpwYXJhbXM6and0OmNsYWltOnJ0X2hhc2giOiJLTXpMenV0bV9vMWI3NXBmWnhLcVBRIiwiaXNzIjoiaHR0cHM6Ly9zYW5kYm94LWF1dGhlbnRpY2F0aW9uLnNwaW5wYXkuY29tLmJyIiwiZXhwIjoxNjk1ODIyNzczLCJpYXQiOjE2OTU3MzYzNzN9.KRx_tn9F7beWcSSv5H2l8k1LW5_UwuC3VcNRuKPIrZM"
        }
      },
      "CibaAuthenticationNotificationError": {
        "value": {
          "auth_req_id": "DkT_4p6gpm_GWJHOezHJiom8QPycUpRGWIJz5Urq4Qw",
          "error": "transaction_failed"
        }
      },
      "CibaAuthenticationNotificationDenyAuthorization": {
        "value": {
          "auth_req_id": "Poo0E9n5kzHOD6_9GWRbbM1aC18o7C6eOaRPTO9F0Vo",
          "error": "access_denied"
        }
      },
      "ValidRecipientResponseExample": {
        "value": {
          "recipient": {
            "referenceId": "a1784b59-f848-49f2-ae3c-d5d1f8a472cb"
          }
        }
      },
      "ValidRecipientGetResponseNoHistoryExample": {
        "value": {
          "country": "BR",
          "referenceId": "uuid-001",
          "merchantId": "4fc11f31-7620-42c0-b8f3-84d12a6d1dea",
          "name": "Restaurante Exemplo LTDA",
          "document": "12345678000195",
          "documentType": "CNPJ",
          "createdAt": "2025-12-06T10:30:00Z",
          "history": []
        }
      },
      "ValidRecipientGetResponseWithHistoryExample": {
        "value": {
          "country": "BR",
          "referenceId": "uuid-001",
          "merchantId": "4fc11f31-7620-42c0-b8f3-84d12a6d1dea",
          "name": "Restaurante Exemplo LTDA",
          "document": "12345678000195",
          "documentType": "CNPJ",
          "createdAt": "2025-12-16T14:15:00Z",
          "history": [
            {
              "name": "Restaurante Exemplo LTDA",
              "document": "12345678000195",
              "createdAt": "2025-12-16T10:30:00Z",
              "deletedAt": null
            },
            {
              "name": "Restaurante Exemplo",
              "document": "12345678000195",
              "createdAt": "2025-12-16T09:00:00Z",
              "deletedAt": "2025-12-16T10:30:00Z"
            }
          ]
        }
      }
    }
  },
  "security": [
    {
      "MerchantApiKey": [],
      "MerchantApiToken": []
    }
  ],
  "tags": [
    {
      "name": "Segurança"
    },
    {
      "name": "Pagamentos"
    },
    {
      "name": "Estornos"
    },
    {
      "name": "Beneficiário final"
    },
    {
      "name": "Tokens de autorização"
    },
    {
      "name": "Notificações",
      "externalDocs": {
        "description": "Guia para implementação",
        "url": "/#/checkout/guide/api/notifications/"
      }
    },
    {
      "name": "Autorização para app - OAuth2",
      "externalDocs": {
        "description": "Guia para implementação",
        "url": "/#/checkout/guide/api/nupay-pre-auth/app-authorization/"
      }
    },
    {
      "name": "Autorização para web - CIBA",
      "externalDocs": {
        "description": "Guia para implementação",
        "url": "/#/checkout/guide/api/nupay-pre-auth/web-authorization/"
      }
    },
    {
      "name": "Autorização para web - OTP",
      "externalDocs": {
        "description": "Guia para implementação",
        "url": "/#/checkout/guide/api/nupay-pre-auth/web-authorization/"
      }
    },
    {
      "name": "Condições de pagamento com Token",
      "externalDocs": {
        "description": "Guia para implementação",
        "url": "/#/checkout/guide/api/nupay-pre-auth/payment/?id=payment-conditions"
      }
    },
    {
      "name": "Condições de pagamento CPF",
      "externalDocs": {
        "description": "Guia para implementação",
        "url": "/#/checkout/guide/api/in-app/payment-conditions/?id=payment-conditions"
      }
    },
    {
      "name": "Condições de pagamento",
      "externalDocs": {
        "description": "Guia para implementação",
        "url": "/#/checkout/guide/api/payment-conditions/?id=payment-conditions"
      }
    }
  ],
  "x-tagGroups": [
    {
      "name": "Core",
      "tags": [
        "Pagamentos",
        "Estornos"
      ]
    },
    {
      "name": "Beneficiário final",
      "tags": [
        "Beneficiário final"
      ]
    },
    {
      "name": "Pagamentos pré-autorizados",
      "tags": [
        "Autorização para app - OAuth2",
        "Autorização para web - CIBA",
        "Autorização para web - OTP",
        "Tokens de autorização"
      ]
    },
    {
      "name": "Notificações",
      "tags": [
        "Notificações"
      ]
    },
    {
      "name": "Condições de pagamento",
      "tags": [
        "Condições de pagamento",
        "Condições de pagamento com Token",
        "Condições de pagamento CPF"
      ]
    }
  ]
}